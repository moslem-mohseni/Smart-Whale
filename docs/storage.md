```md
# **๐ ูุณุชูุฏุงุช ุฌุงูุน ูุงฺูู Storage - ูุณุฎู ฑ.ฐ | ุชุงุฑุฎ: ฒฐฒ5-03-24**

---

## **๐ ููุฏูู**
ูุงฺูู **Storage** ฺฉ ุงุฒ ุงุฌุฒุง ุญุงุช ุณุณุชู ุงุณุช ฺฉู ูุธููโ ูุฏุฑุช ู ุฐุฎุฑูโุณุงุฒ ุฏุงุฏูโูุง ูุฑุจูุท ุจู ูพุดุชุจุงูโฺฏุฑุ ูพฺฉุฑุจูุฏุ ูุงฺฏโูุงุ ูุฏูโูุง ูพุงฺฏุงู ุฏุงุฏูุ ูุงูุชูุฑูฺฏุ ุงุณฺฉุฑูพุชโูุง ุงุฌุฑุง ู ููุงุจุน ูุดุชุฑฺฉ ุฑุง ุจุฑ ุนูุฏู ุฏุงุฑุฏ. ุงู ูุงฺูู ุจุง ูุฏู **ฺฉูพุงุฑฺฺฏุ ููุงุณโูพุฐุฑ ู ุงุณุชุงูุฏุงุฑุฏุณุงุฒ** ุทุฑุงุญ ุดุฏู ุงุณุช ู ุจู ุชูโูุง ุชูุณุนู ฺฉูฺฉ ูโฺฉูุฏ ุชุง ุจุชูุงููุฏ ุจุง ุซุจุงุช ู ุณุฑุนุช ุจุงูุงุชุฑ ุจู ูฺฏูุฏุงุฑ ู ุจูุจูุฏ ุณุณุชู ุจูพุฑุฏุงุฒูุฏ.

### **๐ฏ ุงูุฏุงู ุงุตู ูุงฺูู Storage**
โ **ูุฏุฑุช ูุณุฎูโูุง ูพุดุชุจุงู** ุจุง ูุงุจูุช ุชูฺฉฺฉ ุจู ุจุฎุดโูุง ุชูุณุนูโุฏููุฏูุ ุฒุจุงู ู ุงุดุชุฑุงฺฉ  
โ **ุฐุฎุฑู ู ูุฏุฑุช ุชูุธูุงุช ุณุณุชู** ุฌูุช ฺฉูพุงุฑฺฺฏ ุงุจุฒุงุฑูุง ูพุงฺฏุงู ุฏุงุฏู ู ูุงูุชูุฑูฺฏ  
โ **ุซุจุช ูุงฺฏโูุง ุนููฺฉุฑุฏุ ุฎุทุงูุง ู ูุชุฑฺฉโูุง ุณุณุชู** ุจุฑุง ุจูุจูุฏ ฺฉุงุฑุง ู ุนุจโุงุจ  
โ **ูุฏุฑุช ูุฏูโูุง ูพุงฺฏุงู ุฏุงุฏู ู ุงุณฺฉูุงูุง** ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉูุงุณโูุง ูพุงู ุงุณุชุงูุฏุงุฑุฏ  
โ **ูพุดุชุจุงู ุงุฒ ุงุณฺฉุฑูพุชโูุง ุงุฌุฑุง ู ููุงุจุน ูุดุชุฑฺฉ** ุฌูุช ุงุฌุฑุง ูุธุงู ุนููุงุช ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ  
โ **ุงุฑุชุจุงุท ฺฉูพุงุฑฺู ุจู ุงุฌุฒุง ูุฎุชูู ุณุณุชู** ุงุฒ ุทุฑู ุณุงุฎุชุงุฑ ูุฏููุงุฑ ู ุชุนุฑู ุงุณุชุงูุฏุงุฑุฏ

---

## **๐๏ธ ุณุงุฎุชุงุฑ ฺฉู ูุงฺูู Storage**
ูุงฺูู Storage ุจูโุตูุฑุช ฺฉุงููุงู ูุฏููุงุฑ ู ุทุจู ุงูฺฏููุง ูุนูุงุฑ ูุฏุฑู ุทุฑุงุญ ุดุฏู ุงุณุช. ุณุงุฎุชุงุฑ ูพูุดูโุจูุฏ ุขู ุจู ุชู ุชูุณุนู ุงูฺฉุงู ูโุฏูุฏ ุชุง ูุฑ ุจุฎุด ุฑุง ุจูโุฑุงุญุช ุดูุงุณุงุ ูุฏุฑุช ู ุชูุณุนู ุฏููุฏ.

```plaintext
storage/
โโโ backups/                    # ูฺฏูุฏุงุฑ ูุณุฎูโูุง ูพุดุชุจุงู
โ   โโโ developer/              # ูพุดุชุจุงูโูุง ูุฑุจูุท ุจู ุชูุณุนูโุฏููุฏู
โ   โโโ language/               # ูพุดุชุจุงูโูุง ูุฑุชุจุท ุจุง ุชูุธูุงุช ุฒุจุงู
โ   โโโ shared/                 # ูพุดุชุจุงูโูุง ุจุฎุดโูุง ูุดุชุฑฺฉ
โ
โโโ config/                     # ุชูุธูุงุช ูพฺฉุฑุจูุฏ ุณุณุชู
โ   โโโ clickhouse/             # ุชูุธูุงุช ูพุงฺฏุงู ุฏุงุฏู ClickHouse
โ   โโโ grafana/                # ุชูุธูุงุช ุฏุงุดุจูุฑุฏูุง Grafana
โ   โโโ prometheus/             # ุชูุธูุงุช ูุงูุชูุฑูฺฏ ุจุง Prometheus
โ
โโโ logs/                       # ูุงฺฏโูุง ุณุณุชู
โ   โโโ access/                 # ูุงฺฏโูุง ุฏุณุชุฑุณ ฺฉุงุฑุจุฑุงู
โ   โโโ app/                    # ูุงฺฏโูุง ุงูพูฺฉุดู
โ   โโโ errors/                 # ุซุจุช ุฎุทุงูุง ุณุณุชู
โ   โโโ metrics/                # ูุชุฑฺฉโูุง ู ฺฏุฒุงุฑุดุงุช ุนููฺฉุฑุฏ
โ
โโโ models/                     # ูุฏูโูุง ูพุงฺฏุงู ุฏุงุฏู ู ุงุณฺฉูุงูุง
โ   โโโ developer/              # ูุฏูโูุง ุงุฎุชุตุงุต ุชูุณุนูโุฏููุฏู
โ   โโโ language/               # ูุฏูโูุง ุงุฎุชุตุงุต ุฒุจุงู
โ   โ   โโโ persian/
โ   โ       โโโ db/
โ   โ           โโโ schemas/    # ุงุณฺฉูุงูุง ุงุตู ุฒุจุงู ูุงุฑุณ (ุจุง ฺฉูุงุณโูุง ูพุงู)
โ   โโโ shared/                 # ููุงุจุน ู ุงุณฺฉูุงูุง ูุดุชุฑฺฉ
โ       โโโ __init__.py
โ
โโโ monitoring/                 # ุงุจุฒุงุฑูุง ูุงูุชูุฑูฺฏ ู ูพุงุด ุณุณุชู
โ   โโโ grafana/                # ุฏุงุดุจูุฑุฏูุง Grafana
โ   โโโ prometheus/             # ุชูุธูุงุช Prometheus
โ
โโโ scripts/                    # ุงุณฺฉุฑูพุชโูุง ุงุฌุฑุง ู ฺฉูุงุณโูุง ูพุงู
โ   โโโ base_schema.py          # ุชุนุฑู ฺฉูุงุณโูุง ูพุงู ุจุฑุง ุงุณฺฉูุงูุง
โ
โโโ shared/                     # ููุงุจุน ู ูุงูโูุง ูุดุชุฑฺฉ
    โโโ cache/                 # ูุงูโูุง ฺฉุด ุดุฏู
    โโโ db/                    # ูุงูโูุง ูุฑุชุจุท ุจุง ูพุงฺฏุงู ุฏุงุฏู
    โโโ kafka/                 # ุชูุธูุงุช Kafka
    โโโ tmp/                   # ูุงูโูุง ูููุช
    โโโ uploads/               # ูุงูโูุง ุขูพููุฏ ุดุฏู ุชูุณุท ฺฉุงุฑุจุฑุงู
    โโโ __init__.py            # ุชุนุฑู ูุถุง ูุงู ูุดุชุฑฺฉ
```

---

## **๐ ุจุฑุฑุณ ุงุฌุฒุง ฺฉูุฏ ูุงฺูู Storage**

### **1. Backups**
- **ูฺฉุงู:** `storage/backups/`
- **ูุธูู:** ูฺฏูุฏุงุฑ ูุณุฎูโูุง ูพุดุชุจุงู ุจูโุตูุฑุช ุชูฺฉฺฉ ุจุฑุง ุจุฎุดโูุง ูุฎุชูู ุณุณุชู
- **ุฒุฑุณุงุฎุชุงุฑ:**
  - **developer:** ูพุดุชุจุงูโูุง ูุฑุจูุท ุจู ุชุบุฑุงุช ฺฉุฏ ู ุชูุธูุงุช ุชูุณุนูโุฏููุฏู
  - **language:** ูพุดุชุจุงูโูุง ูุฑุชุจุท ุจุง ุชูุธูุงุช ุฒุจุงู ู ูุฏูโูุง ุฒุจุงู
  - **shared:** ูุณุฎูโูุง ูพุดุชุจุงู ููุงุจุน ู ุฏุงุฏูโูุง ูุดุชุฑฺฉ

---

### **2. Config**
- **ูฺฉุงู:** `storage/config/`
- **ูุธูู:** ุฐุฎุฑู ุชูุธูุงุช ู ูพฺฉุฑุจูุฏ ุงุจุฒุงุฑูุง ููุฑุฏ ุงุณุชูุงุฏู ุฏุฑ ุณุณุชู
- **ุฒุฑุณุงุฎุชุงุฑ:**
  - **clickhouse:** ูพฺฉุฑุจูุฏ ูพุงฺฏุงู ุฏุงุฏู ClickHouse ุจุฑุง ุฐุฎุฑู ู ูพุฑุฏุงุฒุด ุฏุงุฏูโูุง ุชุญูู
  - **grafana:** ุชูุธูุงุช ุฏุงุดุจูุฑุฏูุง ูุงูุชูุฑูฺฏ ุจุง Grafana ุจุฑุง ููุงุด ูุชุฑฺฉโูุง ู ฺฏุฒุงุฑุดุงุช
  - **prometheus:** ูุงูโูุง ุชูุธูุงุช ูุฑุจูุท ุจู ูุงูุชูุฑูฺฏ ุณุณุชู ุจุง ุงุณุชูุงุฏู ุงุฒ Prometheus

---

### **3. Logs**
- **ูฺฉุงู:** `storage/logs/`
- **ูุธูู:** ุซุจุช ูุงฺฏโูุง ูุฑุจูุท ุจู ุฏุณุชุฑุณุ ุนููฺฉุฑุฏุ ุฎุทุงูุง ู ูุชุฑฺฉโูุง ุณุณุชู ุฌูุช ูุงูุชูุฑูฺฏ ู ุนุจโุงุจ
- **ุฒุฑุณุงุฎุชุงุฑ:**
  - **access:** ุซุจุช ูุงฺฏโูุง ูุฑุจูุท ุจู ูุฑูุฏ ู ุฎุฑูุฌ ฺฉุงุฑุจุฑุงู
  - **app:** ุซุจุช ูุงฺฏโูุง ุนููฺฉุฑุฏ ุงูพูฺฉุดู
  - **errors:** ุฐุฎุฑู ุฎุทุงูุง ุณุณุชู ุฌูุช ุนุจโุงุจ
  - **metrics:** ุฌูุนโุขูุฑ ู ุฐุฎุฑู ูุชุฑฺฉโูุง ุณุณุชู ุฌูุช ุชุญูู ุนููฺฉุฑุฏ

---

### **4. Models**
- **ูฺฉุงู:** `storage/models/`
- **ูุธูู:** ูฺฏูุฏุงุฑ ูุฏูโูุง ูพุงฺฏุงู ุฏุงุฏู ู ุงุณฺฉูุงูุง ูุฑุชุจุท ุจุง ุจุฎุดโูุง ูุฎุชูู ุณุณุชู
- **ุณุงุฎุชุงุฑ ุชูฺฉฺฉ:**
  - **developer:** ูุฏูโูุง ุงุฎุชุตุงุต ูุฑุจูุท ุจู ุชูุณุนูโุฏููุฏู
  - **language:** ูุฏูโูุง ุงุฎุชุตุงุต ุฒุจุงูุ ุจูโูฺู ุฒุจุงู ูุงุฑุณ
    - **persian/db/schemas:** ุงุณฺฉูุงูุง ุงุตู ุฒุจุงู ูุงุฑุณ ฺฉู ุชูุงู ุขูโูุง ุจุงุฏ ุงุฒ ฺฉูุงุณโูุง ูพุงู ูพุฑู ฺฉููุฏ
  - **shared:** ููุงุจุน ู ุงุณฺฉูุงูุง ูุดุชุฑฺฉ ุจู ุจุฎุดโูุง ูุฎุชูู

---

### **5. Monitoring**
- **ูฺฉุงู:** `storage/monitoring/`
- **ูุธูู:** ุชูุธู ู ูพุงุด ุนููฺฉุฑุฏ ุณุณุชู ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑูุง ูุงูุชูุฑูฺฏ
- **ุฒุฑุณุงุฎุชุงุฑ:**
  - **grafana:** ุฏุงุดุจูุฑุฏูุง ูุงูุชูุฑูฺฏ ุฌูุช ููุงุด ุนููฺฉุฑุฏ ุณุณุชู
  - **prometheus:** ูุงูโูุง ุชูุธูุงุช ุฌูุช ุฌูุนโุขูุฑ ูุชุฑฺฉโูุง ุณุณุชู

---

### **6. Scripts**
- **ูฺฉุงู:** `storage/scripts/`
- **ูุธูู:** ุงุฌุฑุง ุงุณฺฉุฑูพุชโูุง ุงุฌุฑุง ู ุชุนุฑู ฺฉูุงุณโูุง ูพุงู ุจุฑุง ุงุณฺฉูุงูุง
- **ูฺฺฏโูุง ฺฉูุฏ:**
  - **base_schema.py:** ุชุนุฑู ฺฉูุงุณโูุง ูพุงู ูุงููุฏ ClickHouseSchemaุ MilvusSchema ู TimescaleDBSchema
  - **ฺฉุงุฑุจุฑุฏ:** ุชุถูู ฺฉููุงุฎุช ู ุงุณุชุงูุฏุงุฑุฏุณุงุฒ ุงุฌุงุฏ ุงุณฺฉูุงูุง ุฏุฑ ุณุฑุงุณุฑ ูพุฑูฺู

---

### **7. Shared**
- **ูฺฉุงู:** `storage/shared/`
- **ูุธูู:** ุฐุฎุฑู ููุงุจุน ู ูุงูโูุง ูุดุชุฑฺฉ ููุฑุฏ ุงุณุชูุงุฏู ุฏุฑ ูพุฑูฺู
- **ุฒุฑุณุงุฎุชุงุฑ:**
  - **cache:** ูฺฏูุฏุงุฑ ูุงูโูุง ฺฉุด ุดุฏู ุจุฑุง ุจูุจูุฏ ุณุฑุนุช ูพุฑุฏุงุฒุด
  - **db:** ูุงูโูุง ู ูุงฺููโูุง ูุฑุชุจุท ุจุง ูพุงฺฏุงู ุฏุงุฏูโูุง ููุฑุฏ ุงุณุชูุงุฏู
  - **kafka:** ุชูุธูุงุช ูุฑุจูุท ุจู ุณุณุชู ูพุงูโุฑุณุงู Kafka ุฌูุช ูพุฑุฏุงุฒุด ุฏุงุฏูโูุง
  - **tmp:** ุฐุฎุฑูโุณุงุฒ ูุงูโูุง ูููุช
  - **uploads:** ูฺฏูุฏุงุฑ ูุงูโูุง ุขูพููุฏ ุดุฏู ุชูุณุท ฺฉุงุฑุจุฑุงู
  - **__init__.py:** ุชุนุฑู ูุถุง ูุงู ู ูุฑุงูู ฺฉุฑุฏู ุฏุณุชุฑุณ ฺฉูพุงุฑฺู ุจู ููุงุจุน ูุดุชุฑฺฉ

---

## **๐ ุงุณฺฉูุงูุง ู ฺฉูุงุณโูุง ูพุงู**

### **ููุฏูู ุจุฑ ุงุณฺฉูุงูุง**
ุฏุฑ ุณุณุชู Storageุ ุงุณฺฉูุงูุง ูพุงฺฏุงู ุฏุงุฏู ููุด ฺฉูุฏ ุฏุฑ ูุฏุฑุช ุฏุงุฏูโูุง ุฏุงุฑูุฏ. ุชูุงู ุงุณฺฉูุงูุง ุจุงุฏ ุงุฒ ฺฉูุงุณโูุง ูพุงู ุงุณุชุงูุฏุงุฑุฏ ูพุฑู ฺฉููุฏ ุชุง ฺฉูพุงุฑฺฺฏ ู ฺฉููุงุฎุช ุฏุฑ ุชูุงู ุฏุณุชูุฑุงุช ุงุฌุงุฏ ู ูุฏุฑุช ูพุงฺฏุงู ุฏุงุฏู ุชุถูู ุดูุฏ. ุจู ุงู ููุธูุฑุ ุณู ฺฉูุงุณ ูพุงู ุงุตู ุชุนุฑู ุดุฏูโุงูุฏ:

- **ClickHouseSchema:** ุจุฑุง ุงุณฺฉูุงูุง ูุฑุจูุท ุจู ูพุงฺฏุงู ุฏุงุฏู ClickHouse  
- **MilvusSchema:** ุจุฑุง ุชุนุฑู ูุฌููุนูโูุง ุจุฑุฏุงุฑ (Collections) ุฏุฑ Milvus  
- **TimescaleDBSchema:** ุจุฑุง ุงุณฺฉูุงูุง ูุฑุจูุท ุจู ูพุงฺฏุงู ุฏุงุฏู TimescaleDB

### **1. ูฺฉุงู ฺฉูุงุณโูุง ูพุงู**
- **ูุณุฑ:** `storage/shared/db/schemas/`
- **ูุธูู:** ุชุนุฑู ู ูพุงุฏูโุณุงุฒ ูุชุฏูุง ุงุณุชุงูุฏุงุฑุฏ ูุงููุฏ `get_create_statement` ู `get_check_exists_statement` ุจุฑุง ุงุฌุงุฏุ ุจุฑุฑุณ ู ูฺฏูุฏุงุฑ ุฌุฏุงูู ู ูุฌููุนูโูุง

### **2. ูุชุฏูุง ุงุตู ฺฉูุงุณโูุง ูพุงู**
| **ูุชุฏ**                          | **ูุธูู**                                                                                   |
|-----------------------------------|---------------------------------------------------------------------------------------------|
| `get_create_statement()`          | ุชููุฏ ุฏุณุชูุฑ ุงุฌุงุฏ ุฌุฏูู ุง ูุฌููุนู ุจูโุตูุฑุช ุฏูุงูฺฉ ุจุฑ ุงุณุงุณ ูฺฺฏโูุง ฺฉูุงุณ                    |
| `get_check_exists_statement()`    | ุจุฑุฑุณ ูุฌูุฏ ุฌุฏูู ุง ูุฌููุนู ุฏุฑ ูพุงฺฏุงู ุฏุงุฏู ุฌูุช ุฌููฺฏุฑ ุงุฒ ุงุฌุงุฏ ูุฌุฏุฏ                          |
| `name` (ูฺฺฏ)                    | ุชุนู ูุงู ฺฉุชุง ุฌุฏูู ุง ูุฌููุนู                                                              |
| `description` (ูฺฺฏ)             | ุชูุถุญ ุนููฺฉุฑุฏ ู ูุฏู ุงุฒ ูุฌูุฏ ุฌุฏูู ุง ูุฌููุนู                                                   |
| `database_name` ุง `schema_name`   | ูุดุฎุต ฺฉุฑุฏู ูพุงฺฏุงู ุฏุงุฏู ุง ุงุณฺฉูุง ุฌูุช ูุฑุงุฑฺฏุฑ ุฌุฏูู (ุจุฑุง TimescaleDB)                         |

ุงู ูุชุฏูุง ู ูฺฺฏโูุง ุชุถูู ูโฺฉููุฏ ฺฉู ุชูุงู ุงุณฺฉูุงูุง ุจูโุทูุฑ ฺฉููุงุฎุช ู ุงุณุชุงูุฏุงุฑุฏ ุชุนุฑู ุดุฏู ู ูฺฏูุฏุงุฑ ูโุดููุฏ.

---

## **๐ ุงุณฺฉูุงูุง ุงุตู ุฒุจุงู ูุงุฑุณ**

### **ูฺฉุงู ู ุฏุณุชูโุจูุฏ**
- **ูุณุฑ ุงุตู:** `storage/models/language/persian/db/schemas/`
- **ูุธูู:** ุชุนุฑู ุงุณฺฉูุงูุง ูุฑุจูุท ุจู ุฒุจุงู ูุงุฑุณ ุดุงูู ูุฏุฑุช ูพุงูโูุงุ ูุงูโูุงุ ฺฉุงุฑุจุฑุงูุ ุงุดุชุฑุงฺฉโูุงุ ู ฺฏุฒุงุฑุดุงุช ุชุญูู
- **ุฏุณุชูโุจูุฏ ุงุณฺฉูุงูุง:**
  - **ุงุณฺฉูุงูุง ClickHouse:** ูุฏุฑุช ุฑูุฏุงุฏูุง ุณุณุชูุ ุขูุงุฑ ุงุณุชูุงุฏู ู ูุชุฑฺฉโูุง  
  - **ุงุณฺฉูุงูุง Milvus:** ุฐุฎุฑู ุจุฑุฏุงุฑูุง ุชุนุจู ุดุฏู ุจุฑุง ฺุช ู ุฏุงูุดโูพุงู  
  - **ุงุณฺฉูุงูุง TimescaleDB:** ูุฏุฑุช ุฌุฏุงูู ูุฑุชุจุท ุจุง ฺุชโูุงุ ูพุงูโูุงุ ฺฉุงุฑุจุฑุงูุ ู ุงุดุชุฑุงฺฉโูุง

### **ูููููโูุง ุงุณฺฉูุง**
#### **ุงุณฺฉูุงูุง ClickHouse**
- **EventsTable:** ุซุจุช ุฑูุฏุงุฏูุง ุณุณุชู ุฌูุช ุชุญูู ุนููฺฉุฑุฏ  
- **FileEventsTable:** ูุฏุฑุช ุฑูุฏุงุฏูุง ูุฑุชุจุท ุจุง ุนููุงุช ูุงู (ุขูพููุฏุ ุฏุงูููุฏุ ุญุฐู)  
- **UsageStatsTable:** ุซุจุช ุขูุงุฑ ู ูุชุฑฺฉโูุง ุงุณุชูุงุฏู ฺฉุงุฑุจุฑุงู ู ูุฏูโูุง

#### **ุงุณฺฉูุงูุง Milvus**
- **ChatEmbeddingsCollection:** ูฺฏูุฏุงุฑ ุจุฑุฏุงุฑูุง ุชุนุจู ุดุฏู ฺุช ุฌูุช ุฌุณุชุฌู ูุนูุง  
- **KnowledgeBaseCollection:** ุฐุฎุฑู ุจุฑุฏุงุฑูุง ุชุนุจู ุดุฏู ุฏุงูุดโูพุงู ุฌูุช ุฌุณุชุฌู ุงุทูุงุนุงุช

#### **ุงุณฺฉูุงูุง TimescaleDB**
- **ChatsTable:** ูุฏุฑุช ุงุทูุงุนุงุช ูฺฉุงููุงุช ฺุช ุจุง ุฌุฒุฆุงุช ูุธุฑ ุนููุงูุ ุชูุถุญุงุชุ ูุถุนุช ุขุฑุดู  
- **MessagesTable:** ุซุจุช ูพุงูโูุง ฺุช ุจุง ุงุทูุงุนุงุช ูุงููุฏ ูุญุชูุงุ ุฒูุงู ุงุฌุงุฏุ ูุถุนุช ู ูุชุงุฏุชุง  
- **FileHashesTable:** ูุฏุฑุช ูุดโูุง ูุงู ุฌูุช ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ ุฏุงุฏูโูุง  
- **FileReferencesTable:** ุซุจุช ุงุฑุชุจุงุท ุจู ูพุงูโูุง ู ูุงูโูุง (ุถูููโูุงุ ุจูุฏุงูฺฏุดุชโูุง)  
- **ReactionsTable:** ุฐุฎุฑู ูุงฺฉูุดโูุง ฺฉุงุฑุจุฑุงู ุจู ูพุงูโูุง  
- **SchemaVersionTable:** ูพฺฏุฑ ุชุบุฑุงุช ู ูุณุฎูโุจูุฏ ุงุณฺฉูุงูุง  
- **UserSubscriptionsTable:** ูุฏุฑุช ุงุดุชุฑุงฺฉโูุง ฺฉุงุฑุจุฑุงู ุงุฒ ูุธุฑ ููุน ู ูุถุนุช ูพุฑุฏุงุฎุช  
- **UsersTable:** ุซุจุช ุงุทูุงุนุงุช ฺฉุงุฑุจุฑุงู ุดุงูู ูุงูุ ุงููุ ูพุณูุฑุฏ ู ุชูุธูุงุช ูพุฑููุงู

---

## **๐ ฺฉูพุงุฑฺฺฏ ู ุงุณุชุงูุฏุงุฑุฏุณุงุฒ ุงุณฺฉูุงูุง**

### **ุงุตูู ฺฉูุฏ**
- **ุงุณุชูุงุฏู ุงุฌุจุงุฑ ุงุฒ ฺฉูุงุณโูุง ูพุงู:**  
  ุชูุงู ุงุณฺฉูุงูุง ุจุงุฏ ุงุฒ ฺฉูุงุณโูุง ูพุงู ูุฑุจูุท ุจู ูพุงฺฏุงู ุฏุงุฏู (ClickHouseSchemaุ MilvusSchemaุ TimescaleDBSchema) ุงุฑุซโุจุฑ ฺฉููุฏ ุชุง ฺฉููุงุฎุช ุฏุฑ ุงุฌุงุฏุ ุจูโุฑูุฒุฑุณุงู ู ูฺฏูุฏุงุฑ ุฏุงุฏูโูุง ุญูุธ ุดูุฏ.
  
- **ูุงูโฺฏุฐุงุฑ ฺฉูพุงุฑฺู:**  
  ูฺฺฏโูุง `name`ุ `description` ู `database_name` ุง `schema_name` ุฏุฑ ุชูุงู ุงุณฺฉูุงูุง ุจูโุตูุฑุช ุงุณุชุงูุฏุงุฑุฏ ุชุนุฑู ุดุฏูโุงูุฏ.
  
- **ูุฏุฑุช ุชุบุฑุงุช:**  
  ุงุณุชูุงุฏู ุงุฒ ูุงูโูุง ูุงููุฏ **schema_version.py** ุฌูุช ุซุจุช ุชุบุฑุงุช ู ูุณุฎูโุจูุฏ ุงุณฺฉูุงูุง ุจู ุชูุณุนูโุฏููุฏฺฏุงู ฺฉูฺฉ ูโฺฉูุฏ ุชุง ุจุชูุงููุฏ ุชุบุฑุงุช ุฑุง ูพฺฏุฑ ู ูุณุชูุฏุณุงุฒ ฺฉููุฏ.

### **ุฑุงูููุง ุชูุณุนูโุฏููุฏฺฏุงู**
โ **ูุจู ุงุฒ ุงูุฒูุฏู ุงุณฺฉูุงูุง ุฌุฏุฏุ** ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ุงูฺฏููุง ุชุนุฑู ุดุฏู ุฏุฑ ฺฉูุงุณโูุง ูพุงู ุฑุนุงุช ุดุฏู ุงุณุช.  
โ **ูพุณ ุงุฒ ุงุฌุงุฏ ุงุณฺฉูุงุ** ุงุฒ ูุชุฏ `get_check_exists_statement` ุจุฑุง ุจุฑุฑุณ ูุฌูุฏ ูุฌุฏุฏ ุขู ุงุณุชูุงุฏู ฺฉูุฏ.  
โ **ุฏุฑ ุตูุฑุช ุงุนูุงู ุชุบุฑุงุช ุฏุฑ ุณุงุฎุชุงุฑ ุงุณฺฉูุงุ** ูุงูโูุง ูุณุฎูโุจูุฏ ูุงููุฏ **schema_version.py** ุฑุง ุจูโุฑูุฒุฑุณุงู ููุงุฏ.  
โ **ูุณุชูุฏุณุงุฒ ุฏูู ุชุบุฑุงุชุ** ุจู ุชูโูุง ุฏฺฏุฑ ฺฉูฺฉ ูโฺฉูุฏ ุชุง ุงุฒ ุฑููุฏ ุชูุณุนู ูุทูุน ุดููุฏ.

---

## **๐ ุฌุฏูู ุฎูุงุตู ูุงูโูุง ู ุงุณฺฉูุงูุง ุฏุฑ ูุงฺูู Storage**

| **ูุงู ูุงู / ูุงฺูู**                  | **ููุน ูพุงฺฏุงู ุฏุงุฏู** | **ุชูุถุญุงุช**                                                                                              | **ูุณุฑ**                                                    |
|---------------------------------------|---------------------|----------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
| __init__.py (ูุดุชุฑฺฉ)                   | -                   | ูุนุฑู ฺฉูุงุณโูุง ูพุงู ู ุงุณฺฉูุงูุง ูุดุชุฑฺฉ (ClickHouse, Milvus, TimescaleDB)                                  | storage/shared/db/schemas/                                  |
| events.py                             | ClickHouse          | ุซุจุช ุฑูุฏุงุฏูุง ุณุณุชู ุฌูุช ุชุญูู ุนููฺฉุฑุฏ                                                                   | storage/shared/db/schemas/                                  |
| file_events.py                        | ClickHouse          | ุซุจุช ุฑูุฏุงุฏูุง ูุฑุชุจุท ุจุง ุนููุงุช ูุงู (ุขูพููุฏุ ุฏุงูููุฏุ ุญุฐู)                                                  | storage/shared/db/schemas/                                  |
| usage_stats.py                        | ClickHouse          | ุซุจุช ุขูุงุฑ ู ูุชุฑฺฉโูุง ุงุณุชูุงุฏู ฺฉุงุฑุจุฑุงู                                                                    | storage/shared/db/schemas/                                  |
| chat_embeddings.py                    | Milvus              | ูฺฏูุฏุงุฑ ุจุฑุฏุงุฑูุง ุชุนุจู ุดุฏู ฺุช                                                                             | storage/shared/db/schemas/                                  |
| knowledge_base.py                     | Milvus              | ุฐุฎุฑู ุจุฑุฏุงุฑูุง ุชุนุจู ุดุฏู ุฏุงูุดโูพุงู                                                                       | storage/shared/db/schemas/                                  |
| chats.py                              | TimescaleDB         | ูุฏุฑุช ุงุทูุงุนุงุช ูฺฉุงููุงุช ฺุช ุจุง ุฌุฒุฆุงุช ุฏูู                                                                | storage/shared/db/schemas/                                  |
| file_hashes.py                        | TimescaleDB         | ูุฏุฑุช ูุดโูุง ูุงู ุฌูุช ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ ุฏุงุฏูโูุง                                                         | storage/shared/db/schemas/                                  |
| file_references.py                    | TimescaleDB         | ุซุจุช ุงุฑุชุจุงุท ุจู ูพุงูโูุง ู ูุงูโูุง (ุถูููุ ุจูุฏุงูฺฏุดุช)                                                     | storage/models/language/persian/db/schemas/                 |
| files.py                              | TimescaleDB         | ุฐุฎุฑู ุงุทูุงุนุงุช ูุชุงุฏุชุง ูุงูโูุง ุขูพููุฏโุดุฏู                                                               | storage/models/language/persian/db/schemas/                 |
| messages.py                           | TimescaleDB         | ุซุจุช ูพุงูโูุง ฺุช ุจู ููุฑุงู ุฌุฒุฆุงุช ูุงููุฏ ูุญุชูุงุ ูุถุนุช ู ูุชุงุฏุชุง                                           | storage/models/language/persian/db/schemas/                 |
| reactions.py                          | TimescaleDB         | ุซุจุช ูุงฺฉูุดโูุง ฺฉุงุฑุจุฑุงู ุจู ูพุงูโูุง                                                                        | storage/models/language/persian/db/schemas/                 |
| schema_version.py                     | TimescaleDB         | ูพฺฏุฑ ุชุบุฑุงุช ู ูุณุฎูโุจูุฏ ุงุณฺฉูุงูุง                                                                    | storage/models/language/persian/db/schemas/                 |
| user_subscriptions.py                 | TimescaleDB         | ูุฏุฑุช ุงุดุชุฑุงฺฉโูุง ฺฉุงุฑุจุฑุงู ู ุงุทูุงุนุงุช ูุฑุจูุท ุจู ูพุฑุฏุงุฎุช                                                   | storage/models/language/persian/db/schemas/                 |
| users.py                              | TimescaleDB         | ุซุจุช ุงุทูุงุนุงุช ฺฉุงุฑุจุฑุงู ุดุงูู ูุงู ฺฉุงุฑุจุฑุ ุงููุ ูพุณูุฑุฏ ู ุชูุธูุงุช ูพุฑููุงู                                      | storage/models/language/persian/db/schemas/                 |
| analysis_metrics_table.py             | ClickHouse          | ุซุจุช ูุชุฑฺฉโูุง ุนููฺฉุฑุฏ ุชุญููฺฏุฑ ุฒุจุงู ูุงุฑุณ                                                                | storage/models/language/persian/db/schemas/clickhouse/       |
| dialect_embeddings_collection.py      | Milvus              | ุฐุฎุฑู ุจุฑุฏุงุฑูุง ุชุนุจู ุดุฏู ฺฏูุดโูุง ูุงุฑุณ                                                                 | storage/models/language/persian/db/schemas/milvus/           |
| analysis_reports_table.py             | TimescaleDB         | ุฐุฎุฑู ฺฏุฒุงุฑุดโูุง ุชุญูู ู ูุชุงุฌ ูพุฑุฏุงุฒุด ูุชูู                                                               | storage/models/language/persian/db/schemas/timescaledb/      |
| __init__.py (ClickHouse)              | -                   | ูุนุฑู ุงุณฺฉูุงูุง ClickHouse ุจุฑุง ุฒุจุงู ูุงุฑุณ                                                              | storage/models/language/persian/db/schemas/clickhouse/       |
| __init__.py (Milvus)                  | -                   | ูุนุฑู ูุฌููุนูโูุง ุจุฑุฏุงุฑ (Milvus) ุจุฑุง ุฒุจุงู ูุงุฑุณ                                                         | storage/models/language/persian/db/schemas/milvus/           |
| __init__.py (TimescaleDB)             | -                   | ูุนุฑู ุงุณฺฉูุงูุง TimescaleDB ุจุฑุง ุฒุจุงู ูุงุฑุณ                                                              | storage/models/language/persian/db/schemas/timescaledb/      |

---

## **๐ ุฑุงูููุง ุงุณุชูุฑุงุฑ ู ูฺฏูุฏุงุฑ ุงุณฺฉูุงูุง**

### **ูุฑุงุญู ุงุณุชูุฑุงุฑ ุงุณฺฉูุงูุง**
1. **ุจุงุฑฺฏุฐุงุฑ ฺฉูุงุณโูุง ูพุงู:**  
   - ุงุจุชุฏุง ฺฉูุงุณโูุง ูพุงู ููุฌูุฏ ุฏุฑ `storage/shared/db/schemas/` ุจุงุฏ ุจู ุฏุฑุณุช ููุฏ ุดููุฏ.
2. **ุงุฌุงุฏ ูพุงฺฏุงูโูุง ุฏุงุฏู ู ุฌุฏุงูู:**  
   - ุงุณุชูุงุฏู ุงุฒ ูุชุฏ `get_create_statement` ุฌูุช ุชููุฏ ุฏุณุชูุฑุงุช DDL ู ุงุฌุงุฏ ูพุงฺฏุงูโูุง ุฏุงุฏู ููุฑุฏ ูุงุฒ.
3. **ุจุฑุฑุณ ูุฌูุฏ ุฌุฏุงูู:**  
   - ุงุฌุฑุง `get_check_exists_statement` ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงุฌุงุฏ ุฏูุจุงุฑู ุฌุฏููโูุง ููุฌูุฏ.
4. **ูุธุงุฑุช ุจุฑ ุนููฺฉุฑุฏ:**  
   - ูพุณ ุงุฒ ุงุณุชูุฑุงุฑุ ุงุจุฒุงุฑูุง ูุงูุชูุฑูฺฏ ูุงููุฏ Prometheus ู Grafana ุจุฑุง ูุธุงุฑุช ุจุฑ ุนููฺฉุฑุฏ ุฌุฏุงูู ุจู ฺฉุงุฑ ฺฏุฑูุชู ูโุดููุฏ.

### **ุชูุตูโูุง ูฺฏูุฏุงุฑ**
- **ูุฏุฑุช ูุณุฎูโุจูุฏ:**  
  - ูุฑ ุชุบุฑ ุฏุฑ ุณุงุฎุชุงุฑ ุงุณฺฉูุงูุง ุจุงุฏ ุฏุฑ ูุงู **schema_version.py** ุซุจุช ุดูุฏ.
- **ุงุฌุฑุง ุชุณุชโูุง ฺฉูพุงุฑฺู:**  
  - ูุจู ุงุฒ ุงุนูุงู ุชุบุฑุงุช ุฏุฑ ูุญุทโูุง ุชููุฏุ ุชุณุชโูุง ฺฉูพุงุฑฺู ู CI/CD ุจุงุฏ ุงุฌุฑุง ุดููุฏ.
- **ุจูููโุณุงุฒ ุงูุฏฺฉุณโูุง:**  
  - ุงูุฏฺฉุณโูุง ุงุฌุงุฏ ุดุฏู ุจุงุฏ ุจูโุตูุฑุช ุฏูุฑูโุง ููุฑุฏ ุงุฑุฒุงุจ ูุฑุงุฑ ฺฏุฑูุฏ ุชุง ฺฉุงุฑุง ุฌุณุชุฌููุง ุจูุจูุฏ ุงุจุฏ.
- **ูุณุชูุฏุณุงุฒ ุชุบุฑุงุช:**  
  - ูุฑ ุชุบุฑ ุฏุฑ ุงุณฺฉูุงูุง ุจุงุฏ ูุณุชูุฏุณุงุฒ ุดุฏู ู ุจู ุชูโูุง ูุฑุชุจุท ุงุนูุงู ฺฏุฑุฏุฏ.

---

## **๐ ูฺฉุงุช ูู ู ุชูุตูโูุง ุชูุณุนู**

### **ูฺฉุงุช ฺฉูุฏ ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู**
- **ูพุฑู ุงุฒ ุงุณุชุงูุฏุงุฑุฏูุง ฺฉูุงุณโูุง ูพุงู:**  
  - ุฏุฑ ุฒูุงู ุงุฌุงุฏ ุงุณฺฉูุงูุง ุฌุฏุฏุ ุงุฒ ฺฉูุงุณโูุง ูพุงู **ClickHouseSchema**ุ **MilvusSchema** ู **TimescaleDBSchema** ุงุณุชูุงุฏู ฺฉูุฏ.
- **ฺฉูพุงุฑฺฺฏ ูุงูฺฏุฐุงุฑ:**  
  - ุงุฒ ูฺฺฏโูุง ุงุณุชุงูุฏุงุฑุฏ ูุงููุฏ `name`ุ `description` ู `database_name` ุง `schema_name` ุจูโุทูุฑ ฺฉููุงุฎุช ุงุณุชูุงุฏู ููุงุฏ.
- **ุชุณุช ู ุงุนุชุจุงุฑุณูุฌ:**  
  - ุงุฒ ูุชุฏ `get_check_exists_statement` ุจุฑุง ุงุนุชุจุงุฑุณูุฌ ูุฌูุฏ ุฌุฏุงูู ูพุด ุงุฒ ุงุฌุฑุง ุฏุณุชูุฑุงุช DDL ุจูุฑู ุจฺฏุฑุฏ.
- **ูุฏุฑุช ุฎุทุงูุง:**  
  - ุฎุทุงูุง ูุฑุจูุท ุจู ุงุฌุงุฏ ุฌุฏุงูู ุง ูุฌููุนูโูุง ุจุงุฏ ุจู ุณุฑุนุช ุดูุงุณุง ู ุฑูุน ุดููุฏ.
- **ุจูููโุณุงุฒ ุนููฺฉุฑุฏ:**  
  - ูพุณ ุงุฒ ุงุณุชูุฑุงุฑ ุงุณฺฉูุงูุงุ ุงูุฏฺฉุณโูุง ู ุจูููโุณุงุฒโูุง ูุงุฒู ุฌูุช ุงูุฒุงุด ฺฉุงุฑุง ุณุณุชู ุงุนูุงู ุดููุฏ.

### **ุชูุตูโูุง ูพุดุฑูุชู**
- **ุงุฏุบุงู ุจุง CI/CD:**  
  - ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑูุง CI/CD ุฌูุช ุงุฌุฑุง ุชุณุชโูุง ฺฉูพุงุฑฺู ู ุจุฑุฑุณ ุฏุณุชูุฑุงุช DDL ูุจู ุงุฒ ุงุนูุงู ุชุบุฑุงุช ุฏุฑ ูุญุท ุชููุฏ.
- **ูุงูุชูุฑูฺฏ ุฏูู:**  
  - ุงุณุชูุงุฏู ุงุฒ ุฏุงุดุจูุฑุฏูุง Grafana ู ุชูุธูุงุช Prometheus ุฌูุช ูุธุงุฑุช ุจุฑ ุนููฺฉุฑุฏ ุณุณุชู ุฏุฑ ุฒูุงู ูุงูุน.
- **ุจูุจูุฏ ูุณุชูุฑ:**  
  - ูุณุชูุฏุณุงุฒ ุฏูู ุชุบุฑุงุช ู ุฏุฑุงูุช ุจุงุฒุฎูุฑุฏ ุงุฒ ุชูโูุง ุชูุณุนู ุฌูุช ุจูุจูุฏ ุณุงุฎุชุงุฑ ุงุณฺฉูุงูุง ู ุงุณุชุงูุฏุงุฑุฏูุง ูพุงุฏูโุณุงุฒ.
- **ููุงููฺฏ ุจู ุชูโูุง:**  
  - ุงุฑุชุจุงุท ูุณุชูุฑ ูุงู ุชูโูุง ุชูุณุนูุ ูพุงฺฏุงู ุฏุงุฏู ู ุนููุงุช ุฌูุช ุจูุจูุฏ ุฑููุฏ ุชูุณุนู ู ุฑูุน ูุดฺฉูุงุช ุงุญุชูุงู.

---

## **๐ ุฏุงฺฏุฑุงู ุณุงุฎุชุงุฑ ูุงฺูู Storage**

```plaintext
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ          storage            โ
โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโค
โ  backups    โ   config      โ
โโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโค
โ    logs     โ   models      โ
โโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโค
โ monitoring  โ   scripts     โ
โโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโค
โ   shared    โ               โ
โโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโ
```

**ุชูุถุญ ุฏุงฺฏุฑุงู:**
- **Backups:** ูฺฏูุฏุงุฑ ูุณุฎูโูุง ูพุดุชุจุงู
- **Config:** ุชูุธูุงุช ูพฺฉุฑุจูุฏ ุณุณุชู
- **Logs:** ุซุจุช ูุงฺฏโูุง ุฏุณุชุฑุณุ ุนููฺฉุฑุฏุ ุฎุทุงูุง ู ูุชุฑฺฉโูุง
- **Models:** ุดุงูู ุงุณฺฉูุงูุง ูพุงฺฏุงู ุฏุงุฏู ุจุฑุง ุฒุจุงู ูุงุฑุณ ู ุณุงุฑ ูุฏูโูุง
- **Monitoring:** ุชูุธูุงุช ูพุงุด ู ูุงูุชูุฑูฺฏ ุณุณุชู
- **Scripts:** ุงุณฺฉุฑูพุชโูุง ุงุฌุฑุง ู ฺฉูุงุณโูุง ูพุงู ุฌูุช ุงุณุชุงูุฏุงุฑุฏุณุงุฒ ุงุณฺฉูุงูุง
- **Shared:** ููุงุจุน ู ูุงูโูุง ูุดุชุฑฺฉ ููุฑุฏ ุงุณุชูุงุฏู ุฏุฑ ูพุฑูฺู

---

## **๐ ุงุฑุชุจุงุท ูุงฺูู Storage ุจุง ุณุงุฑ ุจุฎุดโูุง ุณุณุชู**

| **ุจุฎุด ูุฑุชุจุท**   | **ูุญูู ุชุนุงูู ุจุง Storage**                                                                                 |
|-----------------|------------------------------------------------------------------------------------------------------------|
| **API Layer**   | ุงุณุชูุงุฏู ุงุฒ ุฏุงุฏูโูุง ุฐุฎุฑูโุดุฏู ุจุฑุง ุงุฑุงุฆู ูพุงุณุฎ ุจู ุฏุฑุฎูุงุณุชโูุง ฺฉุงุฑุจุฑ ู ูุฏุฑุช ูุดุณุชโูุง ฺฉุงุฑุจุฑุงู             |
| **Monitoring**  | ุฏุฑุงูุช ูุชุฑฺฉโูุง ู ฺฏุฒุงุฑุดโูุง ุนููฺฉุฑุฏ ุงุฒ ูุงฺฏโูุง ู ุงุณฺฉูุงูุง ุฐุฎุฑูโุดุฏู ุฌูุช ุชุญูู ุนููฺฉุฑุฏ ุณุณุชู                  |
| **DevOps**      | ุงุณุชูุงุฏู ุงุฒ ูุงูโูุง ูพฺฉุฑุจูุฏ ููุฌูุฏ ุฏุฑ `config/` ุฌูุช ุงุณุชูุฑุงุฑุ ุจูโุฑูุฒุฑุณุงู ู ูุฏุฑุช ุณุณุชู ูพุงฺฏุงูโูุง ุฏุงุฏู      |
| **Data Analytics** | ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉูุงูุง ุชุญูู (ClickHouseุ TimescaleDB) ุฌูุช ุชุฌุฒู ู ุชุญูู ุฏุงุฏูโูุง ุฌูุนโุขูุฑ ุดุฏู ู ฺฏุฒุงุฑุดโฺฏุฑ      |

---

## **๐ ููููู ฺฉุฏูุง ฺฉุงุฑุจุฑุฏ**

### **ูุซุงู ฑ: ุงุฌุงุฏ ฺฉ ุฌุฏูู ุฌุฏุฏ ุฏุฑ ClickHouse ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉูุงุณ ูพุงู**
```python
from storage.scripts.base_schema import ClickHouseSchema

class CustomEventsTable(ClickHouseSchema):
    @property
    def name(self) -> str:
        return "custom_events"

    @property
    def description(self) -> str:
        return "ุฌุฏูู ููููู ุจุฑุง ุฑูุฏุงุฏูุง ุณูุงุฑุด"

    @property
    def database_name(self) -> str:
        return "custom_db"

    def get_create_statement(self) -> str:
        return f"""
        CREATE DATABASE IF NOT EXISTS {self.database_name};
        CREATE TABLE IF NOT EXISTS {self.database_name}.{self.name} (
            event_date Date,
            event_time DateTime,
            event_type LowCardinality(String),
            details String
        ) ENGINE = MergeTree()
        PARTITION BY toYYYYMM(event_date)
        ORDER BY (event_type, event_time);
        COMMENT ON TABLE {self.database_name}.{self.name} IS 'ุฌุฏูู ุฑูุฏุงุฏูุง ุณูุงุฑุด';
        """
```

---

### **ูุซุงู ฒ: ุชุนุฑู ฺฉ ูุฌููุนู ุจุฑุฏุงุฑ ุฏุฑ Milvus ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉูุงุณ ูพุงู**
```python
from storage.scripts.base_schema import MilvusSchema
from pymilvus import DataType

class CustomEmbeddingsCollection(MilvusSchema):
    @property
    def name(self) -> str:
        return "custom_embeddings"

    @property
    def description(self) -> str:
        return "ูุฌููุนู ููููู ุจุฑุฏุงุฑูุง ุชุนุจู ุดุฏู ุณูุงุฑุด"

    def get_create_statement(self) -> dict:
        return {
            "fields": [
                {"name": "id", "type": DataType.INT64, "is_primary": True},
                {"name": "embedding", "type": DataType.FLOAT_VECTOR, "dim": 1536},
                {"name": "metadata", "type": DataType.JSON}
            ],
            "index_params": {
                "field_name": "embedding",
                "index_type": "HNSW",
                "metric_type": "COSINE",
                "params": {"M": 16, "efConstruction": 200}
            },
            "search_params": {
                "metric_type": "COSINE",
                "params": {"ef": 128}
            },
            "consistency_level": "Strong"
        }
```

---

### **ูุซุงู ณ: ุงุฌุงุฏ ุฌุฏูู ุฏุฑ TimescaleDB ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉูุงุณ ูพุงู**
```python
from storage.scripts.base_schema import TimescaleDBSchema

class CustomMessagesTable(TimescaleDBSchema):
    @property
    def name(self) -> str:
        return "custom_messages"

    @property
    def description(self) -> str:
        return "ุฌุฏูู ููููู ุจุฑุง ุฐุฎุฑู ูพุงูโูุง ุณูุงุฑุด"

    @property
    def schema_name(self) -> str:
        return "public"

    def get_create_statement(self) -> str:
        return f"""
        CREATE SCHEMA IF NOT EXISTS {self.schema_name};
        CREATE TABLE IF NOT EXISTS {self.schema_name}.{self.name} (
            id SERIAL PRIMARY KEY,
            message_id VARCHAR(100) NOT NULL UNIQUE,
            user_id INTEGER,
            content TEXT NOT NULL,
            created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
        );
        SELECT create_hypertable('{self.schema_name}.{self.name}', 'created_at', if_not_exists => TRUE);
        COMMENT ON TABLE {self.schema_name}.{self.name} IS 'ุฌุฏูู ูพุงูโูุง ุณูุงุฑุด';
        """
```

---

## **๐ ุฑุงูููุง ุงุณุชูุฑุงุฑ ู ุจูโุฑูุฒุฑุณุงู**

### **ูุฑุงุญู ุงุณุชูุฑุงุฑ ุงุณฺฉูุงูุง ุฏุฑ ูุญุท ุชููุฏ**
1. **ุจุงุฑฺฏุฐุงุฑ ฺฉูุงุณโูุง ูพุงู:**  
   - ุงุทููุงู ุงุฒ ููุฏ ุตุญุญ ฺฉูุงุณโูุง ูพุงู ูุจู ุงุฒ ุงุฌุฑุง ูุฑฺฏููู ุฏุณุชูุฑ ุงุฌุงุฏ ุฌุฏูู.
2. **ุงุฌุฑุง ุฏุณุชูุฑุงุช DDL:**  
   - ุงุณุชูุงุฏู ุงุฒ ูุชุฏูุง `get_create_statement` ุจุฑุง ุงุฌุงุฏ ูพุงฺฏุงูโูุง ุฏุงุฏู ู ุฌุฏุงูู.
3. **ุจุฑุฑุณ ุตุญุช ุงุฌุงุฏ ุฌุฏุงูู:**  
   - ุงุฌุฑุง ูุชุฏ `get_check_exists_statement` ุฌูุช ุงุทููุงู ุงุฒ ุงุฌุงุฏ ุตุญุญ ุฌุฏุงูู.
4. **ูุงูุชูุฑูฺฏ ู ุจูุจูุฏ:**  
   - ูุธุงุฑุช ุจุฑ ูุชุฑฺฉโูุง ู ฺฏุฒุงุฑุดโูุง ุณุณุชู ุฌูุช ุจูุจูุฏ ุนููฺฉุฑุฏ ูพุณ ุงุฒ ุงุณุชูุฑุงุฑ.

### **ุชูุตูโูุง ูฺฏูุฏุงุฑ**
- **ุซุจุช ุชุบุฑุงุช:**  
  - ุชูุงู ุชุบุฑุงุช ุฏุฑ ุงุณฺฉูุงูุง ุจุงุฏ ุฏุฑ ูุงูโูุง ูุณุฎูโุจูุฏ ุซุจุช ุดููุฏ.
- **ุงุฌุฑุง ุชุณุชโูุง ฺฉูพุงุฑฺู:**  
  - ูุจู ุงุฒ ุจูโุฑูุฒุฑุณุงู ูุญุท ุชููุฏุ ุชุณุชโูุง ฺฉูพุงุฑฺู ุฏุฑ ูุญุทโูุง staging ุงุฌุฑุง ุดูุฏ.
- **ุจูููโุณุงุฒ ุงูุฏฺฉุณโูุง:**  
  - ุงูุฏฺฉุณโูุง ุฌุฏุงูู ุจูโุตูุฑุช ุฏูุฑูโุง ุจุฑุฑุณ ู ุจูโุฑูุฒุฑุณุงู ุดููุฏ ุชุง ฺฉุงุฑุง ุงูุฒุงุด ุงุจุฏ.

---

## **๐ ูฺฉุงุช ูพุงุงู**

โ **ูุงฺูู Storage** ุจุง ุทุฑุงุญ ูุฏููุงุฑ ู ุงุณุชุงูุฏุงุฑุฏุณุงุฒ ุฏูู ุงุณฺฉูุงูุงุ ุจุณุชุฑ ฺฉูพุงุฑฺูโุง ุฑุง ุจุฑุง ูุฏุฑุช ุฏุงุฏูโูุง ูุฑุงูู ูโฺฉูุฏ.  
โ **ุงุณุชูุงุฏู ุงุฒ ฺฉูุงุณโูุง ูพุงู** ุจู ุชุถูู ฺฉููุงุฎุช ุฏุฑ ุงุฌุงุฏ ุฌุฏุงูู ู ูุฌููุนูโูุง ฺฉูฺฉ ูโฺฉูุฏ.  
โ **ูุณุชูุฏุณุงุฒ ุฏูู** ุชุบุฑุงุช ู ุจูโุฑูุฒุฑุณุงูโูุง ุงูุฌุงูโุดุฏูุ ุฒููู ุจูุจูุฏ ูุณุชูุฑ ุณุณุชู ุฑุง ูุฑุงูู ูโุขูุฑุฏ.  
โ **ุงุฑุชุจุงุท ฺฉูพุงุฑฺู** ุจุง ุณุงุฑ ุจุฎุดโูุง ุณุณุชู (ูุงููุฏ APIุ Monitoringุ Data Analytics) ุชุถูู ูโฺฉูุฏ ฺฉู ุฏุงุฏูโูุง ุจู ุตูุฑุช ุตุญุญ ูุฏุฑุช ู ุงุณุชูุงุฏู ุดููุฏ.

---

## **๐ ูพูุณุชโูุง ู ููุงุจุน**

- **ูพูุณุช ฑ:** ูุงูโูุง __init__.py ุฏุฑ ูพูุดูโูุง Shared ู Models  
- **ูพูุณุช ฒ:** ููููู ฺฉุฏูุง ุงุฌุงุฏ ุงุณฺฉูุง ุฏุฑ ClickHouseุ Milvus ู TimescaleDB  
- **ูพูุณุช ณ:** ุฏุงฺฏุฑุงูโูุง ุณุงุฎุชุงุฑ ู ูููุฏุงุฑูุง ูุงุจุณุชฺฏ ุจู ุงุฌุฒุง ูุงฺูู Storage  
- **ููุงุจุน:**  
  - ูุณุชูุฏุงุช ุฑุณู [ClickHouse](https://clickhouse.com)  
  - ุฑุงูููุง ุงุณุชูุงุฏู ุงุฒ [Milvus](https://milvus.io)  
  - ูุณุชูุฏุงุช [TimescaleDB](https://www.timescale.com)  
  - ุฑุงูููุง ุฏุงุฎู ุชูุณุนู ุณุณุชู

---

## **๐ ูฺฉุงุช ฺฉูุฏ ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู Storage**

1. **ูพุฑู ุงุฒ ุงูฺฏููุง ุงุณุชุงูุฏุงุฑุฏ:**  
   - ุชูุงู ุงุณฺฉูุงูุง ุจุงุฏ ุงุฒ ฺฉูุงุณโูุง ูพุงู ุชุนุฑู ุดุฏู ุงุฑุซโุจุฑ ฺฉููุฏ.
2. **ฺฉูพุงุฑฺฺฏ ุฏุงุฏูโูุง:**  
   - ุงุณุชูุงุฏู ุงุฒ ูุงูโฺฏุฐุงุฑ ฺฉูพุงุฑฺู ู ุชุนุฑู ุฏูู ูฺฺฏโูุง ููุฌุจ ุงูุณุฌุงู ุฏุฑ ุฏุงุฏูโูุง ูโุดูุฏ.
3. **ูุฏุฑุช ูุณุฎูโูุง:**  
   - ูุงูโูุง ูุณุฎูโุจูุฏ (ูุงููุฏ schema_version.py) ุฌูุช ุซุจุช ุชุบุฑุงุช ู ุจูโุฑูุฒุฑุณุงู ุณุงุฎุชุงุฑ ุงุณฺฉูุงูุง ุงูุฒุงู ุงุณุช.
4. **ุชุณุช ู ุจูููโุณุงุฒ:**  
   - ุงุฌุฑุง ุชุณุชโูุง ฺฉูพุงุฑฺู ู ุจูููโุณุงุฒ ุงูุฏฺฉุณโูุง ุฌูุช ุจูุจูุฏ ุนููฺฉุฑุฏ ุณุณุชู ุถุฑูุฑ ุงุณุช.
5. **ูุณุชูุฏุณุงุฒ ุชุบุฑุงุช:**  
   - ูุฑฺฏููู ุชุบุฑ ุฏุฑ ุณุงุฎุชุงุฑ ุงุณฺฉูุงูุง ุจุงุฏ ุจู ุตูุฑุช ุฏูู ูุณุชูุฏุณุงุฒ ุดูุฏ ู ุจุง ุชูโูุง ูู ุจู ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ุดูุฏ.

---

## **๐ ุฌูุนโุจูุฏ ููุง**
ูุงฺูู **Storage** ุจุง ูพูุดุด ฺฉุงูู ุจุฎุดโูุง ูพุดุชุจุงูโฺฏุฑุ ูพฺฉุฑุจูุฏุ ุซุจุช ูุงฺฏุ ูุฏุฑุช ูุฏูโูุง ูพุงฺฏุงู ุฏุงุฏู ู ููุงุจุน ูุดุชุฑฺฉุ ุจู ุนููุงู ฺฉ ุงุฒ ุงุฌุฒุง ุญุงุช ุณุณุชูุ ุจุณุชุฑ ูุงุฒู ุจุฑุง ูพุฑุฏุงุฒุด ู ูฺฏูุฏุงุฑ ุฏุงุฏูโูุง ฺฉูุฏ ุฑุง ูุฑุงูู ูโฺฉูุฏ. ูพุฑู ุงุฒ ุงุณุชุงูุฏุงุฑุฏูุง ุชุนุฑู ุดุฏู ุฏุฑ ฺฉูุงุณโูุง ูพุงูุ ุชุถูู ูโฺฉูุฏ ฺฉู ุชูุงู ุงุณฺฉูุงูุง ู ุฌุฏุงูู ุงุฌุงุฏ ุดุฏู ุจู ุตูุฑุช ฺฉูพุงุฑฺู ู ุจููู ูุฏุฑุช ุดููุฏ. ุงู ูุณุชูุฏ ุฑุงูููุง ุฌุงูุน ุงุณุช ฺฉู ุชูุณุนูโุฏููุฏฺฏุงู ู ุชูโูุง ูฺฏูุฏุงุฑ ูโุชูุงููุฏ ุจู ุขู ูุฑุงุฌุนู ฺฉุฑุฏู ู ุฏุฑ ูุฑ ูุฑุญูู ุงุฒ ุชูุณุนู ู ุจูุจูุฏ ุณุณุชู ุงุฒ ุขู ุจูุฑูโููุฏ ุดููุฏ.

---

_ุชูู ุดุฏู ุชูุณุท ุชู ุชูุณุนู Storage ุฏุฑ ุชุงุฑุฎ ฒฐฒ5-03-24_

---

## **๐ ูพุดููุงุฏุงุช ุจุฑุง ุจูุจูุฏ ูุณุชูุฏุงุช ุขุช**
- **ุงูุฒูุฏู ุฏุงฺฏุฑุงูโูุง ุชุนุงูู:**  
  ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑูุง ูุงููุฏ Mermaid ุฌูุช ููุงุด ุฏุงฺฏุฑุงูโูุง ุชุนุงูู ุณุงุฎุชุงุฑ ูพุฑูฺู.
- **ฺฉูพุงุฑฺูโุณุงุฒ ุจุง ุณุณุชูโูุง ูุณุชูุฏุณุงุฒ:**  
  ฺฉูพุงุฑฺู ฺฉุฑุฏู ูุณุชูุฏุงุช ุจุง Confluence ุง Notion ุจุฑุง ุฏุณุชุฑุณ ุขุณุงูโุชุฑ ุชูโูุง ูู.
- **ุฏุฑุงูุช ุจุงุฒุฎูุฑุฏ:**  
  ูุธุฑุงุช ุชูโูุง ุชูุณุนู ุฌูุช ุจูุจูุฏ ูุณุชูุฏุงุช ู ุจูโุฑูุฒ ูฺฏู ุฏุงุดุชู ุขู ุฏุฑ ูุฑ ูุณุฎู ุฌุฏุฏ.
- **ุชูุณุนู ูุณุชูุฑ:**  
  ูุณุชูุฏุณุงุฒ ุชุบุฑุงุช ูุฑ ูุณุฎู ุงุฒ ุณุณุชู ุจู ุตูุฑุช ุฏูุฑูโุง ุฌูุช ุญูุธ ุงูุณุฌุงู ู ุขฺฏุงู ูููโ ุงุนุถุง ุชู.

---
