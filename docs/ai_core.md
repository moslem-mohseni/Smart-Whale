# ูุณุชูุฏุงุช ูุงฺูู Core ุฏุฑ Smart Whale AI

## ๐ ููุฏูู
ูุงฺูู Core ููุจ ุชูพูุฏู ุณุณุชู AI ุงุณุช ฺฉู ูุธูู ุงุฑุงุฆู ุงูฺฉุงูุงุช ูพุงู ู ูุดุชุฑฺฉ ุฑุง ุจุฑ ุนูุฏู ุฏุงุฑุฏ. ุงู ูุงฺูู ุจุง ุชูุฑฺฉุฒ ุจุฑ ุงุตู "ฺฉูุชุฑู ูพุฑุฏุงุฒุด ู ุจูุชุฑู ูุชุฌู" ุทุฑุงุญ ุดุฏู ู ูุฌููุนูโุง ุงุฒ ุณุฑูุณโูุง ฺฉูุฏ ุฑุง ุฏุฑ ุงุฎุชุงุฑ ุณุงุฑ ูุงฺููโูุง ูุฑุงุฑ ูโุฏูุฏ.

## ๐๏ธ ุณุงุฎุชุงุฑ ูุงฺูู
```
core/
โโโ cache/                           # ุณุณุชู ูุฏุฑุช ฺฉูพุงุฑฺู ฺฉุด
โ   โโโ hierarchical/
โ   โ   โโโ l1_cache.py             # ฺฉุด ุณุฑุน ุจุฑุง ุฏุงุฏูโูุง ุญุงุช
โ   โ   โโโ l2_cache.py             # ฺฉุด ูุงู ุจุฑุง ุฏุงุฏูโูุง ุนููู
โ   โ   โโโ l3_cache.py             # ฺฉุด ุจุง TTL ุทููุงู
โ   โโโ manager/
โ   โ   โโโ cache_manager.py        # ูุฏุฑุช ฺฉู ุณุณุชู ฺฉุด
โ   โ   โโโ invalidation.py         # ูฺฉุงูุฒูโูุง ุญุฐู ฺฉุด
โ   โ   โโโ distribution.py         # ุชูุฒุน ฺฉุด ุจู ููุฏูุง
โ   โโโ analytics/
โ       โโโ cache_analyzer.py        # ุชุญูู ฺฉุงุฑุง ฺฉุด
โ       โโโ usage_tracker.py         # ุฑุฏุงุจ ุงุณุชูุงุฏู ุงุฒ ฺฉุด
โ
โโโ resource_management/             # ูุฏุฑุช ูุชูุฑฺฉุฒ ููุงุจุน
โ   โโโ allocator/
โ   โ   โโโ cpu_allocator.py        # ุชุฎุตุต ููุงุจุน CPU
โ   โ   โโโ memory_allocator.py     # ุชุฎุตุต ุญุงูุธู
โ   โ   โโโ gpu_allocator.py        # ุชุฎุตุต ููุงุจุน GPU
โ   โโโ monitor/
โ   โ   โโโ resource_monitor.py     # ูพุงุด ูุตุฑู ููุงุจุน
โ   โ   โโโ threshold_manager.py    # ูุฏุฑุช ุขุณุชุงููโูุง
โ   โ   โโโ alert_generator.py      # ุชููุฏ ูุดุฏุงุฑูุง
โ   โโโ optimizer/
โ       โโโ resource_optimizer.py    # ุจูููโุณุงุฒ ูุตุฑู ููุงุจุน
โ       โโโ load_balancer.py        # ุชูุฒุน ุจุงุฑ ุจู ููุงุจุน
โ
โโโ resilience/                      # ูฺฉุงูุฒูโูุง ุชุญูู ุฎุทุง
โ   โโโ circuit_breaker/
โ   โ   โโโ breaker_manager.py      # ูุฏุฑุช Circuit Breaker
โ   โ   โโโ state_manager.py        # ูุฏุฑุช ูุถุนุชโูุง
โ   โ   โโโ recovery.py             # ูฺฉุงูุฒูโูุง ุจุงุฒุงุจ
โ   โโโ retry/
โ   โ   โโโ retry_manager.py        # ูุฏุฑุช ุชูุงุด ูุฌุฏุฏ
โ   โ   โโโ backoff_strategies.py   # ุงุณุชุฑุงุชฺโูุง ุชุงุฎุฑ
โ   โโโ fallback/
โ       โโโ fallback_manager.py     # ูุฏุฑุช ุฌุงฺฏุฒูโูุง
โ       โโโ degradation.py          # ฺฉุงูุด ุณุทุญ ุณุฑูุณ
โ
โโโ monitoring/                      # ุณุณุชู ูุงูุชูุฑูฺฏ
โ   โโโ metrics/
โ   โ   โโโ collector.py            # ุฌูุนโุขูุฑ ูุชุฑฺฉโูุง
โ   โ   โโโ aggregator.py           # ุชุฌูุน ูุชุฑฺฉโูุง
โ   โ   โโโ exporter.py             # ุตุงุฏุฑฺฉููุฏู ูุชุฑฺฉโูุง
โ   โโโ health/
โ   โ   โโโ checker.py              # ุจุฑุฑุณ ุณูุงูุช ุณุณุชู
โ   โ   โโโ reporter.py             # ฺฏุฒุงุฑุดโุฏู ูุถุนุช
โ   โโโ visualization/
โ       โโโ dashboard_generator.py   # ุชููุฏ ุฏุงุดุจูุฑุฏ
โ       โโโ alert_visualizer.py      # ููุงุด ูุดุฏุงุฑูุง
โ
โโโ logging/                         # ุณุณุชู ูุงฺฏูฺฏ
โ   โโโ handlers/
โ   โ   โโโ file_handler.py         # ุซุจุช ูุงฺฏ ุฏุฑ ูุงู
โ   โ   โโโ kafka_handler.py        # ุงุฑุณุงู ูุงฺฏ ุจู ฺฉุงูฺฉุง
โ   โ   โโโ elastic_handler.py      # ุงุฑุณุงู ูุงฺฏ ุจู Elasticsearch
โ   โโโ formatters/
โ   โ   โโโ json_formatter.py       # ูุฑูุช JSON
โ   โ   โโโ text_formatter.py       # ูุฑูุช ูุชู
โ   โโโ processors/
โ       โโโ log_processor.py        # ูพุฑุฏุงุฒุด ูุงฺฏโูุง
โ       โโโ sensitive_data.py       # ุญุฐู ุฏุงุฏูโูุง ุญุณุงุณ
โ
โโโ security/                        # ุงููุช ู ฺฉูุชุฑู ุฏุณุชุฑุณ
โ   โโโ authentication/
โ   โ   โโโ auth_manager.py         # ูุฏุฑุช ุงุญุฑุงุฒ ููุช
โ   โ   โโโ token_manager.py        # ูุฏุฑุช ุชูฺฉูโูุง
โ   โโโ authorization/
โ   โ   โโโ permission_manager.py   # ูุฏุฑุช ูุฌูุฒูุง
โ   โ   โโโ role_manager.py         # ูุฏุฑุช ููุดโูุง
โ   โโโ encryption/
โ       โโโ data_encryptor.py       # ุฑูุฒูฺฏุงุฑ ุฏุงุฏูโูุง
โ       โโโ key_manager.py          # ูุฏุฑุช ฺฉูุฏูุง
โ
โโโ utils/                          # ุงุจุฒุงุฑูุง ุนููู
    โโโ time/
    โ   โโโ time_utils.py           # ุชูุงุจุน ูุฏุฑุช ุฒูุงู
    โ   โโโ scheduler.py            # ุฒูุงูุจูุฏ ูุธุงู
    โโโ validation/
    โ   โโโ input_validator.py      # ุงุนุชุจุงุฑุณูุฌ ูุฑูุฏ
    โ   โโโ schema_validator.py     # ุงุนุชุจุงุฑุณูุฌ ุณุงุฎุชุงุฑ
    โโโ helpers/
        โโโ string_utils.py         # ุชูุงุจุน ฺฉุงุฑ ุจุง ุฑุดุชู
        โโโ math_utils.py           # ุชูุงุจุน ุฑุงุถ
```

## ๐ฆ ุดุฑุญ ุชูุตู ุจุฎุดโูุง

### 1๏ธโฃ ุณุณุชู ูุฏุฑุช ฺฉูพุงุฑฺู ฺฉุด (`cache/`)

ุงู ุณุณุชู ุจุง ูุฏู ุจูููโุณุงุฒ ุฏุณุชุฑุณ ุจู ุฏุงุฏูโูุง ุทุฑุงุญ ุดุฏู ู ุดุงูู ุณู ูุงู ุงุตู ุงุณุช:

#### ูุงูโูุง ฺฉุด (`hierarchical/`)
- **L1 Cache**: ฺฉุด ุณุฑุน ุจุฑุง ุฏุงุฏูโูุง ุญุงุช ุจุง TTL ฺฉูุชุงู
  - ูุชุฏูุง ุงุตู: `fast_get`, `fast_set`, `check_vitality`
  - ูฺฉุงูุฒู: ุงุณุชูุงุฏู ุงุฒ ุญุงูุธู ูุญู ุจุฑุง ุจุงูุงุชุฑู ุณุฑุนุช

- **L2 Cache**: ฺฉุด ูุงู ุจุฑุง ุฏุงุฏูโูุง ุนููู
  - ูุชุฏูุง ุงุตู: `distributed_get`, `distributed_set`, `sync_nodes`
  - ูฺฉุงูุฒู: ุชูุฒุน ุฏุงุฏู ุจู ููุฏูุง ุจุง Redis

- **L3 Cache**: ฺฉุด ุจุง TTL ุทููุงู ุจุฑุง ุฏุงุฏูโูุง ฺฉูโูุตุฑู
  - ูุชุฏูุง ุงุตู: `persistent_get`, `persistent_set`, `cleanup`
  - ูฺฉุงูุฒู: ุฐุฎุฑูโุณุงุฒ ุจุง ูุงุจูุช persistence

#### ูุฏุฑุช ฺฉุด (`manager/`)
- **Cache Manager**: ูุฏุฑุช ฺฉูพุงุฑฺู ูุงูโูุง ฺฉุด
  - ูุชุฏูุง ุงุตู: `smart_get`, `smart_set`, `promote`, `demote`
  - ูฺฉุงูุฒู: ุชุตููโฺฏุฑ ููุดููุฏ ุจุฑุง ุงูุชุฎุงุจ ูุงู ููุงุณุจ

- **Invalidation**: ูุฏุฑุช ุงุนุชุจุงุฑ ฺฉุด
  - ูุชุฏูุง ุงุตู: `invalidate`, `batch_invalidate`, `pattern_invalidate`
  - ูฺฉุงูุฒู: ุญุฐู ููุดููุฏ ุฏุงุฏูโูุง ูููุถ

- **Distribution**: ุชูุฒุน ฺฉุด ุจู ููุฏูุง
  - ูุชุฏูุง ุงุตู: `distribute`, `rebalance`, `sync`
  - ูฺฉุงูุฒู: ุชูุฒุน ูุชูุงุฒู ุฏุงุฏูโูุง ุจู ููุฏูุง ูุฎุชูู

#### ุชุญูู ฺฉุด (`analytics/`)
- **Cache Analyzer**: ุชุญูู ฺฉุงุฑุง ุณุณุชู ฺฉุด
  - ูุชุฏูุง ุงุตู: `analyze_hit_rate`, `analyze_memory_usage`, `optimize`
  - ูฺฉุงูุฒู: ุชุญูู ูุฏุงูู ู ุงุฑุงุฆู ูพุดููุงุฏุงุช ุจูููโุณุงุฒ

- **Usage Tracker**: ุฑุฏุงุจ ุงูฺฏููุง ุงุณุชูุงุฏู
  - ูุชุฏูุง ุงุตู: `track_usage`, `predict_usage`, `generate_insights`
  - ูฺฉุงูุฒู: ุฌูุนโุขูุฑ ู ุชุญูู ุงูฺฏููุง ุงุณุชูุงุฏู

### 2๏ธโฃ ูุฏุฑุช ูุชูุฑฺฉุฒ ููุงุจุน (`resource_management/`)

ุงู ุจุฎุด ูุณุฆูู ูุฏุฑุช ุจููู ููุงุจุน ุณุณุชู ุงุณุช:

#### ุชุฎุตุตโุฏููุฏู ููุงุจุน (`allocator/`)
- **CPU Allocator**: ูุฏุฑุช ููุงุจุน CPU
  - ูุชุฏูุง ุงุตู: `allocate_cpu`, `optimize_threads`, `manage_priority`
  - ูฺฉุงูุฒู: ุชุฎุตุต ููุดููุฏ ูุณุชูโูุง CPU

- **Memory Allocator**: ูุฏุฑุช ุญุงูุธู
  - ูุชุฏูุง ุงุตู: `allocate_memory`, `defragment`, `optimize_usage`
  - ูฺฉุงูุฒู: ูุฏุฑุช ูพูุง ุญุงูุธู ู ุฌููฺฏุฑ ุงุฒ ูุดุช

- **GPU Allocator**: ูุฏุฑุช ููุงุจุน GPU
  - ูุชุฏูุง ุงุตู: `allocate_gpu`, `share_resources`, `optimize_workload`
  - ูฺฉุงูุฒู: ุชุฎุตุต ุจููู ููุงุจุน GPU

#### ูพุงุด ููุงุจุน (`monitor/`)
- **Resource Monitor**: ูพุงุด ูุตุฑู ููุงุจุน
  - ูุชุฏูุง ุงุตู: `monitor_usage`, `detect_anomalies`, `predict_needs`
  - ูฺฉุงูุฒู: ูพุงุด ูุฏุงูู ู ูพุดโุจู ูุงุฒูุง

- **Threshold Manager**: ูุฏุฑุช ุขุณุชุงููโูุง
  - ูุชุฏูุง ุงุตู: `set_thresholds`, `adjust_dynamic`, `handle_breach`
  - ูฺฉุงูุฒู: ุชูุธู ูพูุง ุขุณุชุงููโูุง ูุดุฏุงุฑ

#### ุจูููโุณุงุฒ (`optimizer/`)
- **Resource Optimizer**: ุจูููโุณุงุฒ ูุตุฑู ููุงุจุน
  - ูุชุฏูุง ุงุตู: `optimize_allocation`, `balance_load`, `reduce_waste`
  - ูฺฉุงูุฒู: ุจูููโุณุงุฒ ูุฏุงูู ุชุฎุตุต ููุงุจุน

### 3๏ธโฃ ูฺฉุงูุฒูโูุง ุชุญูู ุฎุทุง (`resilience/`)

ุงู ุจุฎุด ูุณุฆูู ุญูุธ ูพุงุฏุงุฑ ุณุณุชู ุงุณุช:

#### Circuit Breaker (`circuit_breaker/`)
- **Breaker Manager**: ูุฏุฑุช Circuit Breaker
  - ูุชุฏูุง ุงุตู: `check_state`, `trip_breaker`, `reset_breaker`
  - ูฺฉุงูุฒู: ุฌููฺฏุฑ ุงุฒ ูุฑุงุฎูุงูโูุง ูุงูููู

- **State Manager**: ูุฏุฑุช ูุถุนุชโูุง
  - ูุชุฏูุง ุงุตู: `manage_state`, `transition`, `store_history`
  - ูฺฉุงูุฒู: ูฺฏูุฏุงุฑ ู ูุฏุฑุช ูุถุนุชโูุง ูุฎุชูู

#### Retry Management (`retry/`)
- **Retry Manager**: ูุฏุฑุช ุชูุงุด ูุฌุฏุฏ
  - ูุชุฏูุง ุงุตู: `attempt_retry`, `calculate_delay`, `track_attempts`
  - ูฺฉุงูุฒู: ุชูุงุด ูุฌุฏุฏ ููุดููุฏ ุจุง ุชุงุฎุฑ ููุงุณุจ

### 4๏ธโฃ ูุงูุชูุฑูฺฏ (`monitoring/`)

ุณุณุชู ุฌุงูุน ูพุงุด ู ฺฏุฒุงุฑุดโฺฏุฑ:

#### ูุชุฑฺฉโูุง (`metrics/`)
- **Collector**: ุฌูุนโุขูุฑ ูุชุฑฺฉโูุง
  - ูุชุฏูุง ุงุตู: `collect_metrics`, `process_data`, `store_metrics`
  - ูฺฉุงูุฒู: ุฌูุนโุขูุฑ ูุฏุงูู ูุชุฑฺฉโูุง ูุฎุชูู

- **Aggregator**: ุชุฌูุน ูุชุฑฺฉโูุง
  - ูุชุฏูุง ุงุตู: `aggregate`, `calculate_statistics`, `generate_summaries`
  - ูฺฉุงูุฒู: ุชุฌูุน ู ูพุฑุฏุงุฒุด ุขูุงุฑ ุฏุงุฏูโูุง

### 5๏ธโฃ ูุงฺฏูฺฏ (`logging/`)

ุณุณุชู ุซุจุช ู ูุฏุฑุช ูุงฺฏโูุง:

#### Handlers (`handlers/`)
- **File Handler**: ุซุจุช ูุงฺฏ ุฏุฑ ูุงู
  - ูุชุฏูุง ุงุตู: `write_log`, `rotate_files`, `cleanup_old`
  - ูฺฉุงูุฒู: ูุฏุฑุช ูุงูโูุง ูุงฺฏ ุจุง ฺุฑุฎุด ุฎูุฏฺฉุงุฑ

#### Processors (`processors/`)
- **Log Processor**: ูพุฑุฏุงุฒุด ูุงฺฏโูุง
  - ูุชุฏูุง ุงุตู: `process_log`, `filter_sensitive`, `enrich_data`
  - ูฺฉุงูุฒู: ูพุฑุฏุงุฒุด ู ุบูโุณุงุฒ ูุงฺฏโูุง

### 6๏ธโฃ ุงููุช (`security/`)

ูุฏุฑุช ุงููุช ู ฺฉูุชุฑู ุฏุณุชุฑุณ:

#### Authentication (`authentication/`)
- **Auth Manager**: ูุฏุฑุช ุงุญุฑุงุฒ ููุช
  - ูุชุฏูุง ุงุตู:
    - `authenticate`: ุงุญุฑุงุฒ ููุช ฺฉุงุฑุจุฑ ุจุง ุฑูุดโูุง ูุฎุชูู
    - `verify_token`: ุจุฑุฑุณ ุงุนุชุจุงุฑ ุชูฺฉูโูุง ุฏุณุชุฑุณ
    - `manage_sessions`: ูุฏุฑุช ูุดุณุชโูุง ฺฉุงุฑุจุฑ
  - ูฺฉุงูุฒู: ูพุงุฏูโุณุงุฒ ุงุณุชุฑุงุชฺโูุง ูุฎุชูู ุงุญุฑุงุฒ ููุช ุจุง ูุงุจูุช ุชูุณุนู

- **Token Manager**: ูุฏุฑุช ุชูฺฉูโูุง
  - ูุชุฏูุง ุงุตู:
    - `generate_token`: ุชููุฏ ุชูฺฉู ุจุง ุงูฺฏูุฑุชูโูุง ุงูู
    - `validate_token`: ุงุนุชุจุงุฑุณูุฌ ุชูฺฉูโูุง
    - `refresh_token`: ุชูุฏุฏ ุฎูุฏฺฉุงุฑ ุชูฺฉูโูุง
  - ูฺฉุงูุฒู: ูุฏุฑุช ฺุฑุฎู ุญุงุช ุชูฺฉูโูุง ุจุง ุงููุช ุจุงูุง

#### Authorization (`authorization/`)
- **Permission Manager**: ูุฏุฑุช ูุฌูุฒูุง
  - ูุชุฏูุง ุงุตู:
    - `check_permission`: ุจุฑุฑุณ ุฏุณุชุฑุณ ุจู ููุงุจุน
    - `grant_permission`: ุงุนุทุง ูุฌูุฒ
    - `revoke_permission`: ูุบู ูุฌูุฒ
  - ูฺฉุงูุฒู: ฺฉูุชุฑู ุฏุณุชุฑุณ ูุจุชู ุจุฑ ููุด (RBAC) ุจุง ูุงุจูุช ุชุนุฑู ูุฌูุฒูุง ุณูุงุฑุด

- **Role Manager**: ูุฏุฑุช ููุดโูุง
  - ูุชุฏูุง ุงุตู:
    - `manage_roles`: ูุฏุฑุช ููุดโูุง ุณุณุชู
    - `assign_role`: ุชุฎุตุต ููุด ุจู ฺฉุงุฑุจุฑ
    - `check_role_hierarchy`: ุจุฑุฑุณ ุณูุณูู ูุฑุงุชุจ ููุดโูุง
  - ูฺฉุงูุฒู: ูพุงุฏูโุณุงุฒ ุณุณุชู ููุดโูุง ฺูุฏุณุทุญ ุจุง ูุฑุงุซุช

#### Encryption (`encryption/`)
- **Data Encryptor**: ุฑูุฒูฺฏุงุฑ ุฏุงุฏูโูุง
  - ูุชุฏูุง ุงุตู:
    - `encrypt_data`: ุฑูุฒูฺฏุงุฑ ุฏุงุฏูโูุง ุจุง ุงูฺฏูุฑุชูโูุง ุงุณุชุงูุฏุงุฑุฏ
    - `decrypt_data`: ุฑูุฒฺฏุดุง ุฏุงุฏูโูุง
    - `verify_integrity`: ุจุฑุฑุณ ฺฉูพุงุฑฺฺฏ ุฏุงุฏูโูุง
  - ูฺฉุงูุฒู: ุงุณุชูุงุฏู ุงุฒ ุงูฺฏูุฑุชูโูุง ุฑูุฒูฺฏุงุฑ ูู ุจุง ูุฏุฑุช ฺฉูุฏ ุงูู

- **Key Manager**: ูุฏุฑุช ฺฉูุฏูุง
  - ูุชุฏูุง ุงุตู:
    - `generate_keys`: ุชููุฏ ฺฉูุฏูุง ุฑูุฒูฺฏุงุฑ
    - `rotate_keys`: ฺุฑุฎุด ุฏูุฑูโุง ฺฉูุฏูุง
    - `store_keys`: ุฐุฎุฑูโุณุงุฒ ุงูู ฺฉูุฏูุง
  - ูฺฉุงูุฒู: ูุฏุฑุช ฺุฑุฎู ุญุงุช ฺฉูุฏูุง ุฑูุฒูฺฏุงุฑ ุจุง ุงููุช ุจุงูุง

### 7๏ธโฃ ุงุจุฒุงุฑูุง ุนููู (`utils/`)

ุงู ุจุฎุด ุดุงูู ูุฌููุนูโุง ุงุฒ ุงุจุฒุงุฑูุง ู ุชูุงุจุน ฺฉูฺฉ ุงุณุช ฺฉู ุชูุณุท ุณุงุฑ ุจุฎุดโูุง ููุฑุฏ ุงุณุชูุงุฏู ูุฑุงุฑ ูโฺฏุฑูุฏ:

#### ูุฏุฑุช ุฒูุงู (`time/`)
- **Time Utils**: ุชูุงุจุน ฺฉุงุฑ ุจุง ุฒูุงู
  - ูุชุฏูุง ุงุตู:
    - `convert_timezone`: ุชุจุฏู ููุทููโูุง ุฒูุงู
    - `format_datetime`: ูุงูุจโุจูุฏ ุชุงุฑุฎ ู ุฒูุงู
    - `calculate_duration`: ูุญุงุณุจู ูุฏุช ุฒูุงู
  - ูฺฉุงูุฒู: ูุฏุฑุช ฺฉูพุงุฑฺู ุฒูุงู ุฏุฑ ฺฉู ุณุณุชู

- **Scheduler**: ุฒูุงูุจูุฏ ูุธุงู
  - ูุชุฏูุง ุงุตู:
    - `schedule_task`: ุฒูุงูุจูุฏ ุงุฌุฑุง ูุธุงู
    - `manage_recurring`: ูุฏุฑุช ูุธุงู ุชฺฉุฑุงุฑุดููุฏู
    - `handle_conflicts`: ูุฏุฑุช ุชุฏุงุฎูโูุง ุฒูุงู
  - ูฺฉุงูุฒู: ุฒูุงูุจูุฏ ููุดููุฏ ุจุง ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุจุงุฑ ุณุณุชู

#### ุงุนุชุจุงุฑุณูุฌ (`validation/`)
- **Input Validator**: ุงุนุชุจุงุฑุณูุฌ ูุฑูุฏโูุง
  - ูุชุฏูุง ุงุตู:
    - `validate_input`: ุงุนุชุจุงุฑุณูุฌ ุฏุงุฏูโูุง ูุฑูุฏ
    - `sanitize_data`: ูพุงฺฉุณุงุฒ ุฏุงุฏูโูุง
    - `check_constraints`: ุจุฑุฑุณ ูุญุฏูุฏุชโูุง
  - ูฺฉุงูุฒู: ุงุนุชุจุงุฑุณูุฌ ุฌุงูุน ุจุง ููุงูู ูุงุจู ุชุนุฑู

- **Schema Validator**: ุงุนุชุจุงุฑุณูุฌ ุณุงุฎุชุงุฑ
  - ูุชุฏูุง ุงุตู:
    - `validate_schema`: ุจุฑุฑุณ ุณุงุฎุชุงุฑ ุฏุงุฏูโูุง
    - `check_compatibility`: ุจุฑุฑุณ ุณุงุฒฺฏุงุฑ
    - `generate_schema`: ุชููุฏ ุฎูุฏฺฉุงุฑ ุณุงุฎุชุงุฑ
  - ูฺฉุงูุฒู: ุงุนุชุจุงุฑุณูุฌ ุณุงุฎุชุงุฑ ุจุง ูพุดุชุจุงู ุงุฒ ูุฑูุชโูุง ูุฎุชูู

#### ุชูุงุจุน ฺฉูฺฉ (`helpers/`)
- **String Utils**: ุชูุงุจุน ฺฉุงุฑ ุจุง ุฑุดุชู
  - ูุชุฏูุง ุงุตู:
    - `normalize_text`: ูุฑูุงูโุณุงุฒ ูุชู
    - `find_patterns`: ุฌุณุชุฌู ุงูฺฏููุง
    - `text_metrics`: ูุญุงุณุจู ูุนุงุฑูุง ูุชู
  - ูฺฉุงูุฒู: ูพุฑุฏุงุฒุด ูุชู ุจุง ูพุดุชุจุงู ุงุฒ ุฒุจุงูโูุง ูุฎุชูู

- **Math Utils**: ุชูุงุจุน ุฑุงุถ
  - ูุชุฏูุง ุงุตู:
    - `statistical_analysis`: ุชุญููโูุง ุขูุงุฑ
    - `numerical_operations`: ุนููุงุช ุนุฏุฏ
    - `matrix_calculations`: ูุญุงุณุจุงุช ูุงุชุฑุณ
  - ูฺฉุงูุฒู: ูุญุงุณุจุงุช ุฑุงุถ ุจูููโุดุฏู

## ๐ ุชุนุงูู ุจู ุงุฌุฒุง

### 1. ุชุนุงูู ุณุณุชู ฺฉุด ุจุง ูุฏุฑุช ููุงุจุน
- ุจูููโุณุงุฒ ุฎูุฏฺฉุงุฑ ุญุงูุธู ุงุฎุชุตุงุต ุงูุชู ุจู ฺฉุด
- ุชูุธู ูพูุง ุณุงุฒ ฺฉุด ุจุฑ ุงุณุงุณ ุจุงุฑ ุณุณุชู
- ูุฏุฑุช ููุดููุฏ invalidation ุจุฑุง ฺฉุงูุด ูุตุฑู ููุงุจุน

### 2. ุชุนุงูู ูุงูุชูุฑูฺฏ ุจุง ุณุงุฑ ุจุฎุดโูุง
- ุฌูุนโุขูุฑ ูุชุฑฺฉโูุง ุนููฺฉุฑุฏ ุงุฒ ุชูุงู ุงุฌุฒุง
- ุงุฑุงุฆู ุฏุฏ ฺฉูพุงุฑฺู ุงุฒ ูุถุนุช ุณุณุชู
- ูุดุฏุงุฑุฏู ุฎูุฏฺฉุงุฑ ุฏุฑ ุตูุฑุช ูุดุงูุฏู ูุงููุฌุงุฑ

### 3. ุชุนุงูู ุณุณุชู ุงููุช ุจุง ูุงฺฏูฺฏ
- ุซุจุช ุชูุงู ุฑูุฏุงุฏูุง ุงููุช
- ูพุงุด ุงูฺฏููุง ูุดฺฉูฺฉ
- ุญูุธ ุญุฑู ุฎุตูุต ุฏุฑ ูุงฺฏโูุง

## ๐ ุงุณุชุฑุงุชฺโูุง ุจูููโุณุงุฒ

### 1. ุจูููโุณุงุฒ ุญุงูุธู
- ุงุณุชูุงุฏู ุงุฒ ูฺฉุงูุฒูโูุง lazy loading
- ูุฏุฑุช ููุดููุฏ garbage collection
- ฺฉุดโฺฏุฐุงุฑ ฺูุฏุณุทุญ ุจุง ูพุดโุจู ูุงุฒูุง

### 2. ุจูููโุณุงุฒ CPU
- ุงุณุชูุงุฏู ุงุฒ thread pooling
- ูพุฑุฏุงุฒุด ูุงููุฒูุงู ุนููุงุช ุบุฑุถุฑูุฑ
- ูุฏุฑุช ููุดููุฏ priority scheduling

### 3. ุจูููโุณุงุฒ I/O
- ุงุณุชูุงุฏู ุงุฒ non-blocking I/O
- batch processing ุจุฑุง ุนููุงุช ุฏุณฺฉ
- ุจุงูุฑูฺฏ ููุดููุฏ

## ๐ก๏ธ ุงุณุชุฑุงุชฺโูุง ุงููุช

### 1. ุงููุช ุฏุงุฏู
- ุฑูุฒูฺฏุงุฑ end-to-end
- ูุฏุฑุช ุงูู ฺฉูุฏูุง
- ุญุฐู ุงูู ุฏุงุฏูโูุง ุญุณุงุณ

### 2. ฺฉูุชุฑู ุฏุณุชุฑุณ
- ุงุญุฑุงุฒ ููุช ฺูุฏุนุงูู
- ูุฏุฑุช ุฌูุณุงุช ุจุง ุงููุช ุจุงูุง
- ฺฉูุชุฑู ุฏุณุชุฑุณ ูุจุชู ุจุฑ ููุด

### 3. ุงููุช ุนููุงุช
- ูพุงุด ูุฏุงูู ูุนุงูุชโูุง
- ุชุดุฎุต ู ูพุงุณุฎ ุจู ุญููุงุช
- ุจุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ ุชูุธูุงุช ุงููุช


# ูุณุชูุฏุงุช ูุงฺูู Messaging ุฏุฑ Smart Whale AI

## ๐ ููุฏูู
ูุงฺูู Messagingุ ุณุชูู ููุฑุงุช ุณุณุชู ุงุฑุชุจุงุท Smart Whale AI ูุญุณูุจ ูโุดูุฏ. ุงู ูุงฺูู ุจุง ุงุณุชูุงุฏู ุงุฒ Kafkaุ ุงูฺฉุงู ุงุฑุณุงู ู ุฏุฑุงูุช ูพุงูโูุง ุฑุง ุจู ุงุฌุฒุง ูุฎุชูู ุณุณุชู ูุฑุงูู ูโฺฉูุฏ. ุจุง ุจูุฑูโฺฏุฑ ุงุฒ ุณุงุฎุชุงุฑูุง ุงุณุชุงูุฏุงุฑุฏ ูพุงูุ ูุฏุฑุช ููุถูุนุงุช (Topics) ู ุชูุงุจุน ฺฉูฺฉ ุฌูุช ุงุนุชุจุงุฑุณูุฌุ ุงู ูุงฺูู ุชุถูู ูโฺฉูุฏ ฺฉู ุงุฑุชุจุงุทุงุช ุจู ุตูุฑุช ฺฉูพุงุฑฺูุ ุงูู ู ุจุง ฺฉุงุฑุง ุจุงูุง ุงูุฌุงู ุดููุฏ.

---

## ๐๏ธ ุณุงุฎุชุงุฑ ูุงฺูู
ุณุงุฎุชุงุฑ ุฏุงุฑฺฉุชูุฑ ูุงฺูู Messaging ุจู ุตูุฑุช ุฒุฑ ุงุณุช:

ุฏุงุฑฺฉุชูุฑ:

ai/core/messaging/
```
messaging/
โโโ __init__.py                # ุตุงุฏุฑุณุงุฒ APIโูุง ุงุตู ูุงฺูู Messaging
โโโ constants.py               # ุซุงุจุชโูุง ู ุชูุธูุงุช ูพุดโูุฑุถ ูพุงูโุฑุณุงู
โโโ kafka_service.py           # ุณุฑูุณ ุงุฑุชุจุงุท ุจุง Kafka ู ูุฏุฑุช ูพุงูโูุง
โโโ message_schemas.py         # ุณุงุฎุชุงุฑูุง ูพุงู ู ูุฑุงุฑุฏุงุฏูุง ุงุฑุชุจุงุท
โโโ topic_manager.py           # ูุฏุฑุช ููุถูุนุงุช Kafka ู ุณุงุฎุชุงุฑุฏู ุจู ุขูโูุง
```

---

## ๐ฆ ุดุฑุญ ุชูุตู ุจุฎุดโูุง

### 1๏ธโฃ ุซุงุจุชโูุง ู ุชูุธูุงุช ูพุงูโุฑุณุงู (`constants.py`)
ุงู ุจุฎุด ุดุงูู ุชูุงู ุซุงุจุชโูุง ู ุชูุธูุงุช ูพุดโูุฑุถ ููุฑุฏ ุงุณุชูุงุฏู ุฏุฑ ูุงฺูู Messaging ุงุณุช. ุชูุงู ููุงุฏุฑ ููู ุฏุฑ ุงู ูุงู ุชุนุฑู ุดุฏูโุงูุฏ ุชุง ฺฉูพุงุฑฺฺฏ ุฏุฑ ุงุณุชูุงุฏู ุงุฒ ููุถูุนุงุช ู ูพุงูโูุง ุชุถูู ุดูุฏ.

- **ูุณุฎู ูุงฺูู ูพุงูโุฑุณุงู**  
  - `MESSAGING_VERSION = "1.0.0"`

- **ูพุดููุฏูุง ููุถูุนุงุช ฺฉุงูฺฉุง**  
  - `TOPIC_PREFIX = "smartwhale"`  
  - `DATA_PREFIX = f"{TOPIC_PREFIX}.data"`  
  - `MODELS_PREFIX = f"{TOPIC_PREFIX}.models"`  
  - `BALANCE_PREFIX = f"{TOPIC_PREFIX}.balance"`  
  - `CORE_PREFIX = f"{TOPIC_PREFIX}.core"`

- **ูุงูโูุง ุงุณุชุงูุฏุงุฑุฏ ููุถูุนุงุช**  
  - `DATA_REQUESTS_TOPIC = f"{DATA_PREFIX}.requests"`  
  - `DATA_RESPONSES_PREFIX = f"{DATA_PREFIX}.responses"`  
  - `MODELS_REQUESTS_TOPIC = f"{MODELS_PREFIX}.requests"`  
  - `BALANCE_METRICS_TOPIC = f"{BALANCE_PREFIX}.metrics"`  
  - `BALANCE_EVENTS_TOPIC = f"{BALANCE_PREFIX}.events"`  
  - `SYSTEM_LOGS_TOPIC = f"{CORE_PREFIX}.logs"`

- **ุชูุธูุงุช ูพุดโูุฑุถ ุจุฑุง ููุถูุนุงุช**  
  - `DEFAULT_PARTITIONS = 5`  
  - `DEFAULT_REPLICATION = 3`  
  - `MODEL_TOPIC_PARTITIONS = 3`  
  - `MODEL_TOPIC_REPLICATION = 2`

- **ููุงุฏุฑ ูพุดโูุฑุถ ุจุฑุง ุงูููุชโูุง**  
  - `PRIORITY_CRITICAL = 1`  
  - `PRIORITY_HIGH = 2`  
  - `PRIORITY_MEDIUM = 3`  
  - `PRIORITY_LOW = 4`  
  - `PRIORITY_BACKGROUND = 5`  
  - `DEFAULT_PRIORITY = PRIORITY_MEDIUM`

- **ุชูุธูุงุช ุฒูุงู ุงูุชุธุงุฑ ู ุชุงูโุงูุช**  
  - `DEFAULT_OPERATION_TIMEOUT = 30`  
  - `DEFAULT_KAFKA_TIMEOUT = 10`

- **ุงูุฏุงุฒูโูุง ูพุดโูุฑุถ**  
  - `DEFAULT_BATCH_SIZE = 100`  
  - `DEFAULT_BUFFER_SIZE = 1024 * 1024  # 1MB`

- **ููุงุจุน ุฏุฑุฎูุงุณุช**  
  - `REQUEST_SOURCE_USER = "user"`  
  - `REQUEST_SOURCE_MODEL = "model"`  
  - `REQUEST_SOURCE_SYSTEM = "system"`  
  - `DEFAULT_REQUEST_SOURCE = REQUEST_SOURCE_USER`

- **ูุถุนุชโูุง ูพุงู**  
  - `MESSAGE_STATUS_SUCCESS = "success"`  
  - `MESSAGE_STATUS_ERROR = "error"`  
  - `MESSAGE_STATUS_PENDING = "pending"`  
  - `MESSAGE_STATUS_PARTIAL = "partial"`  
  - `MESSAGE_STATUS_TIMEOUT = "timeout"`

- **ุจุฑฺุณุจโูุง ุฎุทุง**  
  - `ERROR_INVALID_REQUEST = "invalid_request"`  
  - `ERROR_NO_DATA_FOUND = "no_data_found"`  
  - `ERROR_SOURCE_UNAVAILABLE = "source_unavailable"`  
  - `ERROR_PROCESSING_FAILED = "processing_failed"`  
  - `ERROR_TIMEOUT = "timeout"`  
  - `ERROR_UNKNOWN = "unknown_error"`

---

### 2๏ธโฃ ุณุฑูุณ ฺฉุงูฺฉุง (`kafka_service.py`)
ุงู ุจุฎุด ูุณุฆูู ุจุฑูุฑุงุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ Kafka ู ูุฏุฑุช ูพุงูโูุง ูโุจุงุดุฏ. ฺฉูุงุณ ุงุตู ููุฌูุฏ ุฏุฑ ุงู ูุงูุ **KafkaService**ุ ุชูุงู ุนููุงุช ูุฑุจูุท ุจู ุงุฑุณุงูุ ุฏุฑุงูุช ู ูุฏุฑุช ูพุงูโูุง ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ.

#### ฺฉูุงุณ KafkaService
- **ูุฏู**:  
  ูุฏุฑุช ุงุฑุชุจุงุท ุจุง Kafkaุ ุงุฑุณุงู ูพุงูโูุง ุชฺฉ ู ุฏุณุชูโุงุ ุงุนุชุจุงุฑุณูุฌ ู ุงุฑุณุงู ูพุงูโูุง ุณุงุฎุชุงุฑ ุงูุชู (DataRequest ู DataResponse) ู ูุฏุฑุช ุงุดุชุฑุงฺฉโูุง.
  
- **ูุชุฏูุง ุงุตู**:

  - **`__init__`**  
    ููุฏุงุฑุฏู ุงููู ุณุฑูุณุ ุชูุธู ูพฺฉุฑุจูุฏ Kafkaุ ุชููุฏฺฉููุฏู ูพุงู (producer)ุ ูฺฏูุฏุงุฑ ูุณุช ูุตุฑูโฺฉููุฏูโูุง (consumers) ู ูุถุนุช ุงุชุตุงู.
  
  - **`connect()`**  
    ุจุฑูุฑุงุฑ ุงุชุตุงู ุจุง ุณุฑูุฑ Kafka. ุฏุฑ ุตูุฑุช ุนุฏู ุงุชุตุงูุ ฺฉ producer ุงุฌุงุฏ ูโุดูุฏ.  
    _ุจุงุฒฺฏุดุช: True ุฏุฑ ุตูุฑุช ููููุช._

  - **`disconnect()`**  
    ูุทุน ุงุชุตุงู ุงุฒ Kafka ู ุขุฒุงุฏุณุงุฒ ููุงุจุนุ ุดุงูู ูุบู ุงุดุชุฑุงฺฉโูุง ูุนุงู ู ุจุณุชู producer.  
    _ุจุงุฒฺฏุดุช: True ุฏุฑ ุตูุฑุช ููููุช._

  - **`send_message(topic, message_data)`**  
    ุงุฑุณุงู ฺฉ ูพุงู ุจู ููุถูุน ูุดุฎุตุ ูพุงูโูุง ูโุชูุงููุฏ ุจู ุตูุฑุช ุฏฺฉุดูุฑุ ุฑุดุชู ุง ุจุงุช ุจุงุดูุฏ.  
    - ุชุจุฏู ุฏุงุฏู ุจู ูุงูุจ JSON (ุฏุฑ ุตูุฑุช ูุงุฒ)  
    - ุณุงุฎุช ฺฉ ุดุก Message ู ุงุฑุณุงู ุขู  
    _ุจุงุฒฺฏุดุช: True ุฏุฑ ุตูุฑุช ููููุช._

  - **`send_batch(topic, messages)`**  
    ุงุฑุณุงู ุฏุณุชูโุง ูพุงูโูุง ุจู ฺฉ ููุถูุนุ ูพุฑุฏุงุฒุด ูุณุช ูพุงูโูุง ู ุชุจุฏู ูุฑ ฺฉุฏุงู ุจู ูุงูุจ ููุงุณุจ.  
    _ุจุงุฒฺฏุดุช: True ุฏุฑ ุตูุฑุช ููููุช ููู ุงุฑุณุงูโูุง._

  - **`send_data_request(request, topic)`**  
    ุงุฑุณุงู ูพุงูโูุง ุฏุฑุฎูุงุณุช ุฏุงุฏูุ ุงุนุชุจุงุฑุณูุฌ ุณุงุฎุชุงุฑ DataRequest ู ุงุฑุณุงู ุขู ุจู ููุถูุน ูุดุฎุต.  
    _ุจุงุฒฺฏุดุช: True ุฏุฑ ุตูุฑุช ููููุช._

  - **`send_data_response(response, topic)`**  
    ุงุฑุณุงู ูพุงูโูุง ูพุงุณุฎ ุฏุงุฏูุ ุงุนุชุจุงุฑุณูุฌ ุณุงุฎุชุงุฑ DataResponse ู ุงุฑุณุงู ุขู ุจู ููุถูุน ูุดุฎุต.  
    _ุจุงุฒฺฏุดุช: True ุฏุฑ ุตูุฑุช ููููุช._

  - **`subscribe(topic, group_id, handler)`**  
    ุงุดุชุฑุงฺฉ ุฏุฑ ฺฉ ููุถูุน ุจู ููุธูุฑ ุฏุฑุงูุช ูพุงูโูุง.  
    - ุงุฌุงุฏ ูุตุฑูโฺฉููุฏู ุฌุฏุฏ  
    - ุชุจุฏู ูพุงูโูุง ุฏุฑุงูุช ุงุฒ ูุงูุจ Kafka ุจู ุฏฺฉุดูุฑ  
    - ูุฑุงุฎูุงู ุชุงุจุน handler ุฌูุช ูพุฑุฏุงุฒุด ูพุงูโูุง  
    _ุจุงุฒฺฏุดุช: True ุฏุฑ ุตูุฑุช ููููุช._

  - **`unsubscribe(topic, group_id)`**  
    ูุบู ุงุดุชุฑุงฺฉ ุงุฒ ฺฉ ููุถูุนุ ูุชููู ฺฉุฑุฏู ูุตุฑูโฺฉููุฏู ู ูพุงฺฉุณุงุฒ ุงุดุชุฑุงฺฉโูุง ุฐุฎุฑู ุดุฏู.  
    _ุจุงุฒฺฏุดุช: True ุฏุฑ ุตูุฑุช ููููุช._

  - **`topic_exists(topic_name)`**  
    ุจุฑุฑุณ ูุฌูุฏ ฺฉ ููุถูุน ุฏุฑ Kafka ุจุง ุงุณุชูุงุฏู ุงุฒ ูุณุช ููุถูุนุงุช.  
    _ุจุงุฒฺฏุดุช: True ุฏุฑ ุตูุฑุช ูุฌูุฏ ููุถูุน._

  - **`create_topic(topic_name, num_partitions, replication_factor)`**  
    ุงุฌุงุฏ ฺฉ ููุถูุน ุฌุฏุฏ ุฏุฑ Kafka ุฏุฑ ุตูุฑุช ฺฉู ููุถูุน ููุฑุฏ ูุธุฑ ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏ.  
    _ุจุงุฒฺฏุดุช: True ุฏุฑ ุตูุฑุช ููููุช ุงุฌุงุฏ ููุถูุน._

  - **`delete_topic(topic_name)`**  
    ุญุฐู ฺฉ ููุถูุน ุงุฒ Kafkaุ ุดุงูู ุญุฐู ููุถูุน ุงุฒ ูุณุชโูุง ุฏุงุฎู.  
    _ุจุงุฒฺฏุดุช: True ุฏุฑ ุตูุฑุช ููููุช._

  - **`list_topics()`**  
    ุฏุฑุงูุช ูุณุช ุชูุงู ููุถูุนุงุช ููุฌูุฏ ุฏุฑ Kafkaุ ุงู ูุชุฏ ุฏุฑ ูพุงุฏูโุณุงุฒ ูุนู ุจู ุตูุฑุช ูุฑุถ ุงุณุช.  
    _ุจุงุฒฺฏุดุช: ูุณุช ูุงู ููุถูุนุงุช._

  - **`get_topic_info(topic_name)`**  
    ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉ ููุถูุน (ูุงููุฏ ุชุนุฏุงุฏ ูพุงุฑุชุดูโูุง ู ูุงฺฉุชูุฑ ุชฺฉุฑุงุฑ)ุ ุฏุฑ ุตูุฑุช ุนุฏู ูุฌูุฏ ููุถูุนุ ููุฏุงุฑ None ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ.

- **ููููู Singleton**:  
  - `kafka_service = KafkaService()`

---

### 3๏ธโฃ ุณุงุฎุชุงุฑูุง ูพุงู ู ูุฑุงุฑุฏุงุฏูุง ุงุฑุชุจุงุท (`message_schemas.py`)
ุฏุฑ ุงู ุจุฎุด ุณุงุฎุชุงุฑูุง ูพุงู ุงุณุชุงูุฏุงุฑุฏ ุฌูุช ุชุจุงุฏู ุงุทูุงุนุงุช ุจู ูุงฺููโูุง ุชุนุฑู ุดุฏูโุงูุฏ. ุงู ุณุงุฎุชุงุฑูุง ุชุถูู ูโฺฉููุฏ ฺฉู ูพุงูโูุง ุจู ุตูุฑุช ฺฉูพุงุฑฺู ู ุจุง ูุฑูุช ูุดุฎุต ุงุฑุณุงู ู ุฏุฑุงูุช ุดููุฏ.

#### ณ.ฑ ุงููุงุน ุฏุงุฏู ู ููุงุจุน
- **DataType**  
  ุชุนุฑู ุงููุงุน ุฏุงุฏูโูุง ูุงุจู ุฌูุนโุขูุฑ ูุงููุฏ: TEXTุ IMAGEุ VIDEOุ AUDIOุ DOCUMENTุ STRUCTURED ู MIXED.

- **DataSource**  
  ุชุนุฑู ููุงุจุน ุฏุงุฏู ูุงููุฏ: WEBุ WIKIุ TWITTERุ TELEGRAMุ YOUTUBEุ APARATุ NEWSุ BOOKุ APIุ LINKEDINุ PODCASTุ RSSุ SCIENTIFICุ DATABASE ู CUSTOM.

- **OperationType**  
  ุงููุงุน ุนููุงุช ูุงุจู ุฏุฑุฎูุงุณุช ูุงููุฏ: FETCH_DATAุ PROCESS_DATAุ UPDATE_DATAุ DELETE_DATAุ MONITOR_DATAุ VERIFY_DATAุ SEARCH_DATAุ TRANSLATE_DATAุ SUMMARIZE_DATA ู ANALYZE_DATA.

- **Priority**  
  ุณุทูุญ ุงูููุช ูพุงูโูุง ุดุงูู CRITICALุ HIGHุ MEDIUMุ LOW ู BACKGROUND.

- **RequestSource**  
  ููุงุจุน ุฏุฑุฎูุงุณุช ุดุงูู USERุ MODELุ SYSTEMุ SCHEDULED ู API.

#### ณ.ฒ ฺฉูุงุณโูุง ุณุงุฎุชุงุฑ ูพุงู

- **MessageMetadata**  
  ุณุงุฎุชุงุฑ ูุชุงุฏุชุง ูพุงู ุจุฑุง ููู ูพุงูโูุง.  
  - **ููุฏูุง**:
    - `request_id`: ุดูุงุณู ฺฉุชุง (ุจุง ุงุณุชูุงุฏู ุงุฒ uuid).
    - `timestamp`: ุฒูุงู ุงุฑุณุงู ูพุงู (ุจู ูุฑูุช ISO).
    - `source`: ูุจุฏุฃ ูพุงู (ูุซูุงู "balance").
    - `destination`: ููุตุฏ ูพุงู (ูุซูุงู "data").
    - `priority`: ุงูููุช ูพุงู.
    - `request_source`: ููุจุน ุฏุฑุฎูุงุณุช.
    - ููุฏูุง ุชฺฉูู ูุงููุฏ `correlation_id`, `trace_id`, `session_id`.
    - ูุฏุฑุช ุฎุทุง ู ุจุงุฒูพุฎุด ุจุง `retry_count`, `ttl`, `expires_at`.
  - **ูุชุฏูุง**:
    - `to_dict()`: ุชุจุฏู ุจู ุฏฺฉุดูุฑ.
    - `from_dict()`: ุงุฌุงุฏ ููููู ุงุฒ ุฏฺฉุดูุฑ.

- **RequestPayload**  
  ุณุงุฎุชุงุฑ ูุญุชูุง ุฏุฑุฎูุงุณุช ุงุฑุณุงู ุดุฏู ุงุฒ Balance ุจู Data.  
  - **ููุฏูุง**:
    - `operation`: ููุน ุนููุงุช (ูุซูุงู FETCH_DATA).
    - `model_id`: ุดูุงุณู ูุฏู ุฏุฑุฎูุงุณุชโฺฉููุฏู.
    - `data_type`: ููุน ุฏุงุฏู ููุฑุฏ ูุงุฒ.
    - `data_source`: ููุจุน ุฏุงุฏู (ุงุฎุชุงุฑ).
    - `parameters`: ูพุงุฑุงูุชุฑูุง ุงุฎุชุตุงุต.
    - `response_topic`: ููุถูุน ฺฉู ูพุงุณุฎ ุจุงุฏ ุฏุฑ ุขู ุงุฑุณุงู ุดูุฏ.
    - ุชูุธูุงุช ุงุถุงู ูุงููุฏ `batch_id`, `timeout`, `max_size`, `require_fresh`.
    - ูุฑุงุฏุงุฏูโูุง ูุงููุฏ `tags` ู `context`.
  - **ูุชุฏูุง**:
    - `to_dict()`: ุชุจุฏู ุจู ุฏฺฉุดูุฑ (ุจุง ุชุจุฏู Enum ุจู ุฑุดุชู).
    - `from_dict()`: ุงุฌุงุฏ ููููู ุงุฒ ุฏฺฉุดูุฑ ุจุง ูพุฑุฏุงุฒุด ููุงุฏุฑ Enum.

- **ResponsePayload**  
  ุณุงุฎุชุงุฑ ูุญุชูุง ูพุงุณุฎ ุงุฑุณุงู ุดุฏู ุงุฒ Data ุจู Models.  
  - **ููุฏูุง**:
    - `operation`: ููุน ุนููุงุช.
    - `status`: ูุถุนุช ูพุงุณุฎ (ูุซูุงู success ุง error).
    - `data_type`: ููุน ุฏุงุฏู.
    - `data_source`: ููุจุน ุฏุงุฏู (ุงุฎุชุงุฑ).
    - `data`: ุฏุงุฏูโูุง ุงุตู ูพุงุณุฎ.
    - `error_message` ู `error_code` ุฏุฑ ุตูุฑุช ุจุฑูุฒ ุฎุทุง.
    - ุงุทูุงุนุงุช ุชฺฉูู ูุงููุฏ `metrics`, `batch_id`, `next_cursor`, `total_items`, `page_info`.
    - ูุฑุงุฏุงุฏูโูุง ูุงููุฏ `metadata`, `source_url`, `last_updated`.
    - ุงุทูุงุนุงุช ูพุฑุฏุงุฒุด ูุงููุฏ `processing_time`, `cached`, `additional_info`.
  - **ูุชุฏูุง**:
    - `to_dict()`: ุชุจุฏู ุจู ุฏฺฉุดูุฑ.
    - `from_dict()`: ุณุงุฎุช ููููู ุงุฒ ุฏฺฉุดูุฑ.

- **DataRequest**  
  ฺฉูุงุณ ุงุตู ูพุงู ุฏุฑุฎูุงุณุชุ ุชุฑฺฉุจ ุงุฒ `MessageMetadata` ู `RequestPayload`.  
  - **ูุชุฏูุง**:
    - `to_dict()` ู `to_json()` ุจุฑุง ุชุจุฏู ูพุงู ุจู ุฏฺฉุดูุฑ ุง JSON.
    - `from_dict()` ู `from_json()` ุจุฑุง ุงุฌุงุฏ ููููู ุงุฒ ุฏุงุฏูโูุง ุฏุฑุงูุช.

- **DataResponse**  
  ฺฉูุงุณ ุงุตู ูพุงู ูพุงุณุฎุ ุชุฑฺฉุจ ุงุฒ `MessageMetadata` ู `ResponsePayload`.  
  - **ูุชุฏูุง** ูุดุงุจู DataRequest.

#### ณ.ณ ุชูุงุจุน ฺฉูฺฉ
- **create_data_request(...)**  
  ุชุงุจุน ุฌูุช ุงุฌุงุฏ ฺฉ DataRequest ุจุง ุฏุฑุงูุช ูพุงุฑุงูุชุฑูุง ูุธุฑ model_idุ data_typeุ data_sourceุ priorityุ response_topic ู ุบุฑู.  
  - ุงุณุชุฎุฑุงุฌ ููุฏุงุฑ ุนุฏุฏ ุงูููุช ู ุฑุดุชูโุง ููุจุน ุฏุฑุฎูุงุณุช.
  - ุงุฌุงุฏ ูููููโูุง MessageMetadata ู RequestPayload.
  - ุจุงุฒฺฏุดุช ฺฉ ููููู DataRequest.

- **create_data_response(...)**  
  ุชุงุจุน ุฌูุช ุงุฌุงุฏ ฺฉ DataResponse ุจุง ุฏุฑุงูุช ูพุงุฑุงูุชุฑูุง ูุธุฑ request_idุ model_idุ statusุ dataุ data_typeุ data_source ู ุบุฑู.
  - ุงุฌุงุฏ ูููููโูุง MessageMetadata ู ResponsePayload.
  - ุจุงุฒฺฏุดุช ฺฉ ููููู DataResponse.

- **is_valid_data_request(request)**  
  ุชุงุจุน ุฌูุช ุงุนุชุจุงุฑุณูุฌ ุณุงุฎุชุงุฑ DataRequestุ ุจุฑุฑุณ ูุฌูุฏ ููุฏูุง ุถุฑูุฑ ุฏุฑ metadata ู payload.

- **is_valid_data_response(response)**  
  ุชุงุจุน ุฌูุช ุงุนุชุจุงุฑุณูุฌ ุณุงุฎุชุงุฑ DataResponseุ ุจุฑุฑุณ ูุฌูุฏ ููุฏูุง ุถุฑูุฑ ุฏุฑ metadata ู payload.

---

### 4๏ธโฃ ูุฏุฑุช ููุถูุนุงุช ฺฉุงูฺฉุง (`topic_manager.py`)
ุงู ุจุฎุด ูุณุฆูู ูุฏุฑุช ููุถูุนุงุช (Topics) ุฏุฑ ุณุณุชู ูพุงูโุฑุณุงู ุงุณุช. ุงุฌุงุฏุ ุงุนุชุจุงุฑุณูุฌุ ุญุฐู ู ูุณุชโฺฉุฑุฏู ููุถูุนุงุช ุชูุณุท ฺฉูุงุณ **TopicManager** ุงูุฌุงู ูโุดูุฏ.

#### ด.ฑ Enum ุฏุณุชูโุจูุฏ ููุถูุนุงุช
- **TopicCategory**  
  ุฏุณุชูโุจูุฏ ุงููุงุน ููุถูุนุงุช ุจุฑุง ฺฉุงุฑุจุฑุฏูุง ูุฎุชูู:
  - `REQUEST`: ุฏุฑุฎูุงุณุชโูุง.
  - `RESPONSE`: ูพุงุณุฎโูุง.
  - `EVENT`: ุฑูุฏุงุฏูุง.
  - `METRIC`: ูุชุฑฺฉโูุง.
  - `LOG`: ูุงฺฏโูุง.
  - `INTERNAL`: ุงุฑุชุจุงุทุงุช ุฏุงุฎู.
  - `COMMAND`: ุฏุณุชูุฑุงุช.
  - `NOTIFICATION`: ุงุนูุงูโูุง.

#### ด.ฒ ฺฉูุงุณ TopicManager
- **ูุฏู**:  
  ูุฏุฑุช ููุถูุนุงุช ฺฉุงูฺฉุง ุจุฑุง ูุงฺููโูุง ุณุณุชูุ ุงุฌุงุฏ ุณุงุฎุชุงุฑ ูพุงู ููุถูุนุงุช ู ูุฏุฑุช ููุถูุนุงุช ุงุฎุชุตุงุต ูุฏูโูุง.

- **ูุชุฏูุง ุงุตู**:

  - **`__init__(kafka_service)`**  
    ููุฏุงุฑุฏู ุงููู ุจุง ุฏุฑุงูุช ุดุก kafka_service ุฌูุช ุงุณุชูุงุฏู ุฏุฑ ุนููุงุชโูุง ูุฏุฑุช.
  
  - **`_initialize_topics()`**  
    ุชุนุฑู ุณุงุฎุชุงุฑ ูพุงู ููุถูุนุงุช ุจู ุตูุฑุช ุฏฺฉุดูุฑ:
    - **data_requests**: ุฏุฑุฎูุงุณุชโูุง ุฌูุนโุขูุฑ ุฏุงุฏู ุงุฒ Balance ุจู Data.
    - **data_responses_prefix**: ูพุดููุฏ ูุชุงุฌ ูุฏูโูุงุ ุจู ุตูุฑุช ูพูุง ุจุฑุง ูุฑ ูุฏู ุงุฌุงุฏ ูโุดูุฏ.
    - **models_requests**: ุฏุฑุฎูุงุณุชโูุง ูุฏูโูุง ุจู Balance.
    - **balance_metrics**: ูุชุฑฺฉโูุง ูุฑุจูุท ุจู Balance.
    - **balance_events**: ุฑูุฏุงุฏูุง ูุฑุจูุท ุจู Balance.
    - **system_logs**: ูุงฺฏโูุง ุฏุงุฎู ุณุณุชู.
    - ููฺูู ูฺฏูุฏุงุฑ ููุถูุนุงุช ุงุฌุงุฏ ุดุฏู ุฏุฑ ูุฌููุนู `created_topics` ู ููุถูุนุงุช ุงุฎุชุตุงุต ูุฏูโูุง ุฏุฑ `model_topics`.

  - **`get_topic_name(topic_key)`**  
    ุฏุฑุงูุช ูุงู ฺฉุงูู ููุถูุน ุจุฑ ุงุณุงุณ ฺฉูุฏ ุฏุงุฏู ุดุฏูุ ุฏุฑ ุตูุฑุช ุนุฏู ูุฌูุฏ ฺฉูุฏุ ููุงู ฺฉูุฏ ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ.

  - **`get_model_result_topic(model_id)`**  
    ุณุงุฎุช ู ุฐุฎุฑู ูุงู ููุถูุน ูุชุงุฌ ุจุฑุง ฺฉ ูุฏู ุฎุงุตุ ุฏุฑ ุตูุฑุช ุชฺฉุฑุงุฑ ุจูุฏู ุงุฒ ฺฉุด ุงุณุชูุงุฏู ูโฺฉูุฏ.

  - **`ensure_topic_exists(topic_name, partitions, replication)`**  
    ุงุทููุงู ุงุฒ ูุฌูุฏ ฺฉ ููุถูุนุ ุฏุฑ ุตูุฑุช ุนุฏู ูุฌูุฏ ุงุฒ ุทุฑู kafka_service ุขู ุฑุง ุงุฌุงุฏ ูโฺฉูุฏ ู ุฏุฑ ูุฌููุนู created_topics ุฐุฎุฑู ูโฺฉูุฏ.

  - **`ensure_model_topic(model_id)`**  
    ุงุทููุงู ุงุฒ ุงุฌุงุฏ ููุถูุน ูุชุงุฌ ุจุฑุง ฺฉ ูุฏูุ ุจุฑ ุงุณุงุณ ูพุดููุฏ ุชุนุฑูโุดุฏู.

  - **`initialize_all_topics()`**  
    ุงุฌุงุฏ ุชูุงู ููุถูุนุงุช ูพุงู ููุฑุฏ ูุงุฒ ุณุณุชู ุจุง ุงุณุชูุงุฏู ุงุฒ ensure_topic_exists.
  
  - **`list_all_topics()`**  
    ุฏุฑุงูุช ูุณุช ุชูุงู ููุถูุนุงุช ููุฌูุฏ ุฏุฑ Kafka.
  
  - **`list_model_topics()`**  
    ุฏุฑุงูุช ูุณุช ููุถูุนุงุช ุงุฎุชุตุงุต ูุฏูโูุง ุจู ุตูุฑุช ุชุงูพู (model_id, topic_name).
  
  - **`delete_topic(topic_name)`**  
    ุญุฐู ฺฉ ููุถูุน ุงุฒ Kafkaุ ุจู ููุฑุงู ูพุงฺฉุณุงุฒ ุงุฒ ูุณุชโูุง ุฏุงุฎู.
  
  - **`delete_model_topic(model_id)`**  
    ุญุฐู ููุถูุน ุงุฎุชุตุงุต ฺฉ ูุฏูุ ุฏุฑ ุตูุฑุช ุงูุช ูุดุฏูุ ูุดุฏุงุฑ ุฏุงุฏู ูโุดูุฏ.

---

### 5๏ธโฃ ุตุงุฏุฑุณุงุฒ APIโูุง ุงุตู (`__init__.py`)
ูุงู __init__.py ูุงฺูู Messaging ูุณุฆูู ุตุงุฏุฑุณุงุฒ ุชูุงู ฺฉูุงุณโูุงุ ุชูุงุจุน ู ุซุงุจุชโูุง ุชุนุฑูโุดุฏู ุฏุฑ ุจุฎุดโูุง ูุฎุชูู ุงู ูุงฺูู ุงุณุช.  
ุจุง ุงุณุชูุงุฏู ุงุฒ ุงู ูุงูุ ุณุงุฑ ุจุฎุดโูุง ุณุณุชู ูโุชูุงููุฏ ุจู ุณุงุฏฺฏ ุจู ุงูฺฉุงูุงุช Messaging ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดูุฏ.

- **ุตุงุฏุฑุณุงุฒ ุซุงุจุชโูุง**:  
  ุชูุงู ุซุงุจุชโูุง ูุฑุจูุท ุจู ูุณุฎูุ ูพุดููุฏูุง ููุถูุนุงุชุ ุชูุธูุงุช ูพุดโูุฑุถุ ูุถุนุชโูุง ูพุงู ู ุจุฑฺุณุจโูุง ุฎุทุง.

- **ุตุงุฏุฑุณุงุฒ ุณุงุฎุชุงุฑูุง ูพุงู**:  
  ุงููุงุน ุฏุงุฏูโูุงุ ฺฉูุงุณโูุง MessageMetadataุ RequestPayloadุ ResponsePayloadุ DataRequestุ DataResponse ู ุชูุงุจุน ฺฉูฺฉ ูุฑุจูุท ุจู ุขูโูุง.

- **ุตุงุฏุฑุณุงุฒ ูุฏุฑุช ููุถูุนุงุช**:  
  TopicCategory ู TopicManager.

- **ุตุงุฏุฑุณุงุฒ ุณุฑูุณ ฺฉุงูฺฉุง**:  
  KafkaService ู ููููู singleton `kafka_service`.

- **ูุณุช ููุงุฏูุง ุตุงุฏุฑุดุฏู**:  
  __all__ ุดุงูู ุชูุงู ฺฉูุงุณโูุงุ ุชูุงุจุน ู ุซุงุจุชโูุง ุงุณุช ฺฉู ูโุชูุงููุฏ ุชูุณุท ุณุงุฑ ูุงฺููโูุง ุงุณุชูุงุฏู ุดููุฏ.

---

## ๐ ุชุนุงูู ุจู ุงุฌุฒุง

1. **ุชุนุงูู ุจู ุซุงุจุชโูุง ู ฺฉูุงุณโูุง ูพุงู**  
   - ุซุงุจุชโูุง ู ุชูุธูุงุช ููุฌูุฏ ุฏุฑ `constants.py` ุจู ุนููุงู ูพุงู ุจุฑุง ูุงูโฺฏุฐุงุฑ ููุถูุนุงุชุ ุชูุธูุงุช ุชุงูโุงูุช ู ุงูููุชโูุง ุนูู ูโฺฉููุฏ.
   - ฺฉูุงุณโูุง `MessageMetadata`ุ `RequestPayload` ู `ResponsePayload` ุจุง ุงุณุชูุงุฏู ุงุฒ ุงู ุซุงุจุชโูุงุ ูพุงูโูุง ุงุณุชุงูุฏุงุฑุฏ ุฑุง ุชุนุฑู ูโฺฉููุฏ.

2. **ุชุนุงูู ุจู KafkaService ู TopicManager**  
   - **KafkaService** ูุธูู ุจุฑูุฑุงุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ Kafkaุ ุงุฑุณุงู ู ุฏุฑุงูุช ูพุงูโูุง ู ูุฏุฑุช ุงุดุชุฑุงฺฉโูุง ุฑุง ุจุฑ ุนูุฏู ุฏุงุฑุฏ.
   - **TopicManager** ุจุง ุงุณุชูุงุฏู ุงุฒ KafkaServiceุ ุงุทููุงู ุญุงุตู ูโฺฉูุฏ ฺฉู ููุถูุนุงุช ููุฑุฏ ูุงุฒ ุงุฌุงุฏ ุดุฏู ู ุจู ุตูุฑุช ูพูุง ูุฏุฑุช ูโุดููุฏ.

3. **ุชุนุงูู ุจู ูุงฺููโูุง ุงุฑุณุงู ู ุฏุฑุงูุช ูพุงู**  
   - ุชูุงุจุน ฺฉูฺฉ ุฏุฑ `message_schemas.py` ูุงููุฏ `create_data_request` ู `create_data_response` ุจู ุงุฌุงุฏ ูพุงูโูุง ุตุญุญ ฺฉูฺฉ ูโฺฉููุฏ.
   - ุชูุงุจุน ุงุนุชุจุงุฑุณูุฌ (`is_valid_data_request` ู `is_valid_data_response`) ุงุฒ ุจุฑูุฒ ุฎุทุงูุง ุณุงุฎุชุงุฑ ุฌููฺฏุฑ ูโฺฉููุฏ.

---

## ๐ ุงุณุชุฑุงุชฺโูุง ุจูููโุณุงุฒ ู ุงููุช

### 1. ุจูููโุณุงุฒ ุงุฑุชุจุงุทุงุช
- **ุงุฑุชุจุงุท ุบุฑููุฒูุงู**:  
  ุงุณุชูุงุฏู ุงุฒ async/await ุฏุฑ ูุชุฏูุง KafkaService ุชุถูู ูโฺฉูุฏ ฺฉู ูพุงูโูุง ุจู ุตูุฑุช ุบุฑููุฒูุงู ุงุฑุณุงู ู ุฏุฑุงูุช ุดููุฏ.
- **ุงุฑุณุงู ุฏุณุชูโุง ูพุงูโูุง**:  
  ูุชุฏ `send_batch` ุจูุฑูโูุฑ ุณุณุชู ุฑุง ุฏุฑ ููุงูุน ูพุฑุฏุงุฒุด ุญุฌู ุจุงูุง ุฏุงุฏู ุงูุฒุงุด ูโุฏูุฏ.
- **ุงุนุชุจุงุฑุณูุฌ ูพุงูโูุง**:  
  ุชูุงุจุน `is_valid_data_request` ู `is_valid_data_response` ุงุฒ ุตุญุช ุณุงุฎุชุงุฑ ูพุงูโูุง ุงุทููุงู ุญุงุตู ูโฺฉููุฏ.

### 2. ุงุณุชุฑุงุชฺโูุง ุงููุช
- **ูุฏุฑุช ุฎุทุง ู ฺฏุฒุงุฑุดโุฏู**:  
  ุงุณุชูุงุฏู ุงุฒ logโูุง ุฏูู (ุจุง ูพุงูโูุง ุงุทูุงุนุงุช ู ุฎุทุง) ุฏุฑ ุชูุงู ูุชุฏูุงุ ุงูฺฉุงู ูุธุงุฑุช ู ุฑูุน ุงุดฺฉุงู ุฏุฑ ุฒูุงู ูุงูุน ุฑุง ูุฑุงูู ูโฺฉูุฏ.
- **ฺฉูุชุฑู ุฏุณุชุฑุณ ุจู ููุถูุนุงุช**:  
  ูุฏุฑุช ุฏูู ุงุดุชุฑุงฺฉโูุง (subscribe/unsubscribe) ู ุงุนุชุจุงุฑุณูุฌ ููุถูุนุงุช ุงุฒ ุจุฑูุฒ ูุดฺฉูุงุช ุงุญุชูุงู ุฌููฺฏุฑ ูโฺฉูุฏ.

